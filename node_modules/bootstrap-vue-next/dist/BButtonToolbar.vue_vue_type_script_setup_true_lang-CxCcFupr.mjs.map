{"version":3,"file":"BButtonToolbar.vue_vue_type_script_setup_true_lang-CxCcFupr.mjs","sources":["../src/components/BButton/BButtonGroup.vue","../src/components/BButton/BButtonToolbar.vue"],"sourcesContent":["<template>\n  <component :is=\"props.tag\" :class=\"computedClasses\" role=\"group\" :aria-label=\"props.ariaLabel\">\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BButtonGroupProps} from '../../types/ComponentProps'\nimport {computed, provide} from 'vue'\nimport {buttonGroupKey} from '../../utils/keys'\nimport type {BButtonGroupSlots} from '../../types'\n\nprovide(buttonGroupKey, true)\n\nconst _props = withDefaults(defineProps<BButtonGroupProps>(), {\n  ariaLabel: 'Group',\n  size: 'md',\n  tag: 'div',\n  vertical: false,\n})\nconst props = useDefaults(_props, 'BButtonGroup')\ndefineSlots<BButtonGroupSlots>()\n\nconst computedClasses = computed(() => ({\n  'btn-group': !props.vertical,\n  [`btn-group-${props.size}`]: props.size !== 'md',\n  'btn-group-vertical': props.vertical,\n}))\n</script>\n","<template>\n  <div\n    ref=\"toolbarRef\"\n    :class=\"computedClasses\"\n    class=\"btn-toolbar\"\n    :role=\"props.role\"\n    :aria-label=\"props.ariaLabel\"\n    @keydown=\"handleKeyNav\"\n  >\n    <slot />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport type {BButtonToolbarSlots} from '../../types'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BButtonToolbarProps} from '../../types/ComponentProps'\nimport {computed, nextTick, useTemplateRef} from 'vue'\nimport {CODE_DOWN, CODE_END, CODE_HOME, CODE_LEFT, CODE_RIGHT, CODE_UP} from '../../utils/constants'\nimport {stopEvent} from '../../utils/event'\nimport {getActiveElement} from '../../utils/dom'\n\nconst _props = withDefaults(defineProps<BButtonToolbarProps>(), {\n  ariaLabel: 'Group',\n  justify: false,\n  keyNav: false,\n  role: 'toolbar',\n})\nconst props = useDefaults(_props, 'BButtonToolbar')\ndefineSlots<BButtonToolbarSlots>()\n\nconst toolbarRef = useTemplateRef<HTMLElement>('toolbarRef')\n\nconst computedClasses = computed(() => ({\n  'justify-content-between': props.justify,\n}))\n\n// Get all focusable elements within the toolbar\nconst getFocusableElements = (): HTMLElement[] => {\n  if (!toolbarRef.value) return []\n\n  const selector =\n    'button:not(:disabled), [href]:not(:disabled), input:not(:disabled), select:not(:disabled), textarea:not(:disabled), [tabindex]:not([tabindex=\"-1\"]):not(:disabled)'\n  const elements = Array.from(toolbarRef.value.querySelectorAll(selector)) as HTMLElement[]\n\n  // Filter out elements that are not visible or have display:none\n  return elements.filter((el) => {\n    const style = window.getComputedStyle(el)\n    return style.display !== 'none' && style.visibility !== 'hidden'\n  })\n}\n\nconst isDisabled = (element: HTMLElement): boolean =>\n  element.hasAttribute('disabled') || element.getAttribute('aria-disabled') === 'true'\n\nconst focusFirst = () => {\n  nextTick(() => {\n    const elements = getFocusableElements()\n    const firstEnabled = elements.find((el) => !isDisabled(el))\n    firstEnabled?.focus()\n  })\n}\n\nconst focusLast = () => {\n  nextTick(() => {\n    const elements = getFocusableElements()\n    const lastEnabled = elements.reverse().find((el) => !isDisabled(el))\n    lastEnabled?.focus()\n  })\n}\n\nconst focusPrev = () => {\n  nextTick(() => {\n    const elements = getFocusableElements()\n    const activeElement = getActiveElement() as HTMLElement\n    const currentIndex = elements.indexOf(activeElement)\n\n    if (currentIndex > 0) {\n      // Look backwards for the first non-disabled element\n      for (let i = currentIndex - 1; i >= 0; i--) {\n        if (!isDisabled(elements[i])) {\n          elements[i]?.focus()\n          break\n        }\n      }\n    }\n  })\n}\n\nconst focusNext = () => {\n  nextTick(() => {\n    const elements = getFocusableElements()\n    const activeElement = getActiveElement() as HTMLElement\n    const currentIndex = elements.indexOf(activeElement)\n\n    if (currentIndex < elements.length - 1) {\n      // Look forwards for the first non-disabled element\n      for (let i = currentIndex + 1; i < elements.length; i++) {\n        if (!isDisabled(elements[i])) {\n          elements[i]?.focus()\n          break\n        }\n      }\n    }\n  })\n}\n\nconst handleKeyNav = (event: KeyboardEvent) => {\n  if (!props.keyNav) return\n\n  const {code, shiftKey} = event\n\n  if (code === CODE_LEFT || code === CODE_UP) {\n    stopEvent(event)\n    if (shiftKey) {\n      focusFirst()\n    } else {\n      focusPrev()\n    }\n  } else if (code === CODE_RIGHT || code === CODE_DOWN) {\n    stopEvent(event)\n    if (shiftKey) {\n      focusLast()\n    } else {\n      focusNext()\n    }\n  } else if (code === CODE_HOME) {\n    stopEvent(event)\n    focusFirst()\n  } else if (code === CODE_END) {\n    stopEvent(event)\n    focusLast()\n  }\n}\n</script>\n"],"names":["_createBlock","_resolveDynamicComponent","_unref","_renderSlot","_createElementBlock","_normalizeClass"],"mappings":"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"}