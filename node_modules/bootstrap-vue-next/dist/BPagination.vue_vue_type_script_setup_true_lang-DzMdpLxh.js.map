{"version":3,"file":"BPagination.vue_vue_type_script_setup_true_lang-DzMdpLxh.js","sources":["../src/components/BPagination/BPagination.vue"],"sourcesContent":["<template>\n  <ul\n    class=\"pagination\"\n    :class=\"computedWrapperClasses\"\n    role=\"menubar\"\n    :aria-disabled=\"props.disabled\"\n    :aria-label=\"props.ariaLabel || undefined\"\n    @keydown=\"handleKeyNav\"\n  >\n    <li\n      v-for=\"(page, index) in pages\"\n      :key=\"`page-${page.id}`\"\n      v-bind=\"page.li\"\n      ref=\"_pageElements\"\n      :displayIndex=\"index\"\n    >\n      <span\n        v-if=\"page.id === FIRST_ELLIPSIS || page.id === LAST_ELLIPSIS\"\n        v-bind=\"ellipsisProps.span\"\n      >\n        <slot name=\"ellipsis-text\">\n          {{ props.ellipsisText || '...' }}\n        </slot>\n      </span>\n      <component\n        v-bind=\"page.button\"\n        :is=\"page.button.is\"\n        v-else-if=\"'button' in page\"\n        @click=\"page.clickHandler\"\n      >\n        <slot\n          :name=\"page.text.name\"\n          :disabled=\"page.text.disabled\"\n          :page=\"page.text.page\"\n          :index=\"page.text.index\"\n          :active=\"page.text.active ?? false\"\n          :content=\"page.text.value\"\n        >\n          {{ page.text.value }}\n        </slot>\n      </component>\n    </li>\n  </ul>\n</template>\n\n<script setup lang=\"ts\">\nimport {BvEvent} from '../../utils'\nimport {computed, nextTick, useTemplateRef, watch} from 'vue'\nimport type {BPaginationProps} from '../../types/ComponentProps'\nimport {useAlignment} from '../../composables/useAlignment'\nimport {useToNumber} from '@vueuse/core'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {ClassValue} from '../../types/AnyValuedAttributes'\nimport {CODE_DOWN, CODE_LEFT, CODE_RIGHT, CODE_UP} from '../../utils/constants'\nimport {stopEvent} from '../../utils/event'\nimport {getActiveElement} from '../../utils/dom'\nimport {type BPaginationEmits, type BPaginationSlots} from '../../types'\n\n// Threshold of limit size when we start/stop showing ellipsis\nconst ELLIPSIS_THRESHOLD = 3\n\nconst FIRST_BUTTON = -1\nconst PREV_BUTTON = -2\nconst NEXT_BUTTON = -3\nconst LAST_BUTTON = -4\nconst FIRST_ELLIPSIS = -5\nconst LAST_ELLIPSIS = -6\n\nconst _props = withDefaults(defineProps<Omit<BPaginationProps, 'modelValue'>>(), {\n  align: 'start',\n  ariaControls: undefined,\n  ariaLabel: 'Pagination',\n  disabled: false,\n  ellipsisClass: undefined,\n  ellipsisText: '\\u2026',\n  firstClass: undefined,\n  firstNumber: false,\n  firstText: '\\u00AB',\n  noEllipsis: false,\n  noGotoEndButtons: false,\n  labelFirstPage: 'Go to first page',\n  labelLastPage: 'Go to last page',\n  labelNextPage: 'Go to next page',\n  labelPage: 'Go to page',\n  labelPrevPage: 'Go to previous page',\n  lastClass: undefined,\n  lastNumber: false,\n  lastText: '\\u00BB',\n  limit: 5,\n  nextClass: undefined,\n  nextText: '\\u203A',\n  pageClass: undefined,\n  perPage: DEFAULT_PER_PAGE,\n  pills: false,\n  prevClass: undefined,\n  prevText: '\\u2039',\n  size: undefined,\n  totalRows: DEFAULT_TOTAL_ROWS,\n})\nconst props = useDefaults(_props, 'BPagination')\nconst emit = defineEmits<BPaginationEmits>()\ndefineSlots<BPaginationSlots>()\n\nconst modelValue = defineModel<Exclude<BPaginationProps['modelValue'], undefined>>({\n  default: 1,\n})\n\nconst pageElements = useTemplateRef('_pageElements')\n\nconst limitNumber = useToNumber(() => props.limit, {nanToZero: true, method: 'parseInt'})\nconst perPageNumber = useToNumber(() => props.perPage, {nanToZero: true, method: 'parseInt'})\nconst totalRowsNumber = useToNumber(() => props.totalRows, {nanToZero: true, method: 'parseInt'})\nconst modelValueNumber = useToNumber(modelValue, {nanToZero: true, method: 'parseInt'})\n\nconst perPageSanitized = computed(() => Math.max(perPageNumber.value || DEFAULT_PER_PAGE, 1))\nconst totalRowsSanitized = computed(() => Math.max(totalRowsNumber.value || DEFAULT_TOTAL_ROWS, 0))\n// Use Active to on page-item to denote active tab\nconst numberOfPages = computed(() => Math.ceil(totalRowsSanitized.value / perPageSanitized.value))\nconst computedFill = computed(() => props.align === 'fill')\n// This doesn't use the computedFill util because TS cannot infer that it would never be 'fill'\nconst justifyAlign = computed(() => (props.align === 'fill' ? 'start' : props.align))\n\nconst alignment = useAlignment(justifyAlign)\n\nconst isActivePage = (pageNumber: number) => pageNumber === computedModelValue.value\nconst getTabIndex = (num: number) => (props.disabled ? null : isActivePage(num) ? '0' : '-1')\n\nconst checkDisabled = (num: number) =>\n  props.disabled ||\n  isActivePage(num) ||\n  computedModelValue.value < 1 ||\n  // Check if the number is out of bounds\n  num < 1 ||\n  num > numberOfPages.value\n\nconst firstDisabled = computed(() => checkDisabled(1))\nconst prevDisabled = computed(() => checkDisabled(computedModelValue.value - 1))\nconst lastDisabled = computed(() => checkDisabled(numberOfPages.value))\nconst nextDisabled = computed(() => checkDisabled(computedModelValue.value + 1))\n\nconst getBaseButtonProps = ({\n  page,\n  classVal,\n  disabled,\n  slotName,\n  textValue,\n  tabIndex,\n  label,\n  position,\n  isActive,\n  hidden,\n  isSmHidden,\n}: {\n  page: number\n  disabled: boolean\n  classVal: ClassValue\n  slotName: 'first-text' | 'prev-text' | 'next-text' | 'last-text' | 'page'\n  textValue?: string\n  tabIndex?: string\n  label?: string\n  position?: number\n  isActive?: boolean\n  hidden?: boolean\n  isSmHidden?: boolean\n}) => ({\n  li: {\n    'class': [\n      'page-item',\n      {\n        'active': isActive,\n        disabled,\n        'bv-d-sm-down-none': isSmHidden,\n        'flex-fill': computedFill.value,\n        'd-flex': computedFill.value && !disabled,\n      },\n      classVal,\n    ],\n    'role': 'presentation',\n    'aria-hidden': hidden,\n  },\n  button: {\n    'is': disabled ? 'span' : 'button',\n    'class': ['page-link', 'text-center', {'flex-grow-1': !disabled && computedFill.value}],\n    'aria-label': label,\n    'aria-controls': props.ariaControls || undefined,\n    'aria-disabled': disabled ? true : undefined,\n    'aria-posinset': position,\n    'aria-setsize': position ? numberOfPages.value : undefined,\n    'role': 'menuitem',\n    'type': disabled ? undefined : 'button',\n    'tabindex': disabled ? undefined : tabIndex,\n  },\n  text: {\n    name: slotName,\n    active: isActive,\n    value: textValue ?? page,\n    page,\n    disabled,\n    index: page - 1,\n    content: textValue ? undefined : String(page),\n  },\n  clickHandler: (e: Readonly<MouseEvent>) => pageClick(e, page),\n})\n\nconst getButtonProps = ({\n  page,\n  classVal,\n  disabled,\n  slotName,\n  textValue,\n  label,\n}: {\n  page: number\n  disabled: boolean\n  classVal: ClassValue\n  slotName: 'first-text' | 'prev-text' | 'next-text' | 'last-text' | 'page'\n  textValue?: string\n  label: string\n}) => getBaseButtonProps({page, classVal, disabled, slotName, textValue, label, tabIndex: '-1'})\n\nconst getPageButtonProps = (page: number, isSmHidden?: boolean) =>\n  getBaseButtonProps({\n    page,\n    disabled: props.disabled,\n    classVal: props.pageClass,\n    slotName: 'page',\n    label: props.labelPage ? `${props.labelPage} ${page}` : undefined,\n    tabIndex: getTabIndex(page) ?? undefined,\n    position: page,\n    isActive: isActivePage(page),\n    isSmHidden,\n  })\n\nconst firstButtonProps = computed(() =>\n  getButtonProps({\n    page: 1,\n    disabled: firstDisabled.value,\n    classVal: props.firstClass,\n    slotName: 'first-text',\n    textValue: props.firstText,\n    label: props.labelFirstPage,\n  })\n)\nconst prevButtonProps = computed(() =>\n  getButtonProps({\n    page: Math.max(computedModelValue.value - 1, 1),\n    disabled: prevDisabled.value,\n    classVal: props.prevClass,\n    slotName: 'prev-text',\n    textValue: props.prevText,\n    label: props.labelPrevPage,\n  })\n)\nconst nextButtonProps = computed(() =>\n  getButtonProps({\n    page: Math.min(computedModelValue.value + 1, numberOfPages.value),\n    disabled: nextDisabled.value,\n    classVal: props.nextClass,\n    slotName: 'next-text',\n    textValue: props.nextText,\n    label: props.labelNextPage,\n  })\n)\nconst lastButtonProps = computed(() =>\n  getButtonProps({\n    page: numberOfPages.value,\n    disabled: lastDisabled.value,\n    classVal: props.lastClass,\n    slotName: 'last-text',\n    textValue: props.lastText,\n    label: props.labelLastPage,\n  })\n)\n\nconst ellipsisProps = computed(() => ({\n  li: {\n    class: [\n      'page-item',\n      'disabled',\n      'text-center',\n      'bv-d-sm-down-none',\n      computedFill.value ? 'flex-fill' : '',\n      props.ellipsisClass,\n    ],\n    role: 'separator',\n  },\n  span: {\n    class: ['page-link'],\n  },\n}))\n\nconst computedWrapperClasses = computed(() => [\n  alignment.value,\n  {\n    [`pagination-${props.size}`]: props.size !== undefined,\n    'b-pagination-pills': props.pills,\n  },\n])\n\nconst pagination = computed(() => ({\n  pageSize: perPageSanitized.value,\n  totalRows: totalRowsNumber.value,\n  numberOfPages: numberOfPages.value,\n}))\n\nconst pageClick = (event: Readonly<MouseEvent>, pageNumber: number) => {\n  if (pageNumber === computedModelValue.value) return\n  const clickEvent = new BvEvent('page-click', {\n    cancelable: true,\n    target: event.target,\n  })\n  emit('page-click', clickEvent, pageNumber)\n\n  if (clickEvent.defaultPrevented) return\n\n  modelValue.value = pageNumber\n\n  nextTick(() => {\n    if (pageNumber === 1) {\n      focusFirst()\n    } else if (pageNumber === pagination.value.numberOfPages) {\n      focusLast()\n    }\n  })\n  //    nextTick(() => {\n  //  if (isVisible(target) && un_element.contains(target)) {\n  //  attemptFocus(target)\n  //} else {\n  //this.focusCurrent()\n  //}\n  // })\n}\n\nconst isDisabled = (el: HTMLButtonElement) => {\n  const isElement = !!(el && el.nodeType === Node.ELEMENT_NODE)\n  const hasAttr = isElement ? el.hasAttribute('disabled') : null\n  const hasClass = isElement && el.classList ? el.classList.contains('disabled') : false\n\n  return !isElement || el.disabled || hasAttr || hasClass\n}\n\nconst getButtons = (): HTMLButtonElement[] =>\n  [...(pageElements.value ?? [])]\n    .sort(\n      (a, b) =>\n        parseInt(a.getAttribute('displayIndex') || '0') -\n        parseInt(b.getAttribute('displayIndex') || '0')\n    )\n    .map((page) => page.children[0])\n    .filter((el) => {\n      if (el.getAttribute('display') === 'none' || el.tagName.toUpperCase() !== 'BUTTON') {\n        return false\n      }\n\n      const bcr = el.getBoundingClientRect()\n\n      return !!(bcr && bcr.height > 0 && bcr.width > 0)\n    })\n    .map((el) => el as HTMLButtonElement)\n\nconst focusFirst = () => {\n  nextTick(() => {\n    const btn = getButtons().find((el) => !isDisabled(el))\n    btn?.focus()\n  })\n}\n\nconst focusPrev = () => {\n  nextTick(() => {\n    const buttons = getButtons()\n    const index = buttons.indexOf(getActiveElement() as HTMLButtonElement)\n\n    if (index > 0 && !isDisabled(buttons[index - 1])) {\n      buttons[index - 1]?.focus()\n    }\n  })\n}\n\nconst focusLast = () => {\n  nextTick(() => {\n    const btn = getButtons()\n      .reverse()\n      .find((el) => !isDisabled(el))\n    btn?.focus()\n  })\n}\n\nconst focusNext = () => {\n  nextTick(() => {\n    const buttons = getButtons()\n    const index = buttons.indexOf(getActiveElement() as HTMLButtonElement)\n    if (index < buttons.length - 1 && !isDisabled(buttons[index + 1])) {\n      buttons[index + 1]?.focus()\n    }\n  })\n}\n\nconst handleKeyNav = (event: KeyboardEvent) => {\n  const {code, shiftKey} = event\n  if (code === CODE_LEFT || code === CODE_UP) {\n    stopEvent(event)\n    if (shiftKey) {\n      focusFirst()\n    } else {\n      focusPrev()\n    }\n  } else if (code === CODE_RIGHT || code === CODE_DOWN) {\n    stopEvent(event)\n    if (shiftKey) {\n      focusLast()\n    } else {\n      focusNext()\n    }\n  }\n}\n\nconst computedModelValue = computed(() => {\n  const page = modelValueNumber.value || 1\n  return page > numberOfPages.value ? numberOfPages.value : page < 1 ? 1 : page\n})\n\nwatch(pagination, (oldValue, newValue) => {\n  if (newValue.pageSize !== oldValue.pageSize && newValue.totalRows === oldValue.totalRows) {\n    // If the page size changes, reset to page 1\n    modelValue.value = 1\n  }\n})\n\nconst noFirstButton = computed(() => (props.noGotoEndButtons && !props.firstNumber ? 1 : 0))\nconst noLastButton = computed(() => (props.noGotoEndButtons && !props.lastNumber ? 1 : 0))\nconst showFirstButton = computed(() => (noFirstButton.value ? 0 : 1))\nconst showLastButton = computed(() => (noLastButton.value ? 0 : 1))\nconst firstPage = computed(() => (props.firstNumber ? 1 : 0))\nconst lastPage = computed(() => (props.lastNumber ? 1 : 0))\nconst halfLimit = computed(() => Math.floor(limitNumber.value / 2))\n\nconst pages = computed(() => {\n  const {value} = computedModelValue\n\n  const els = elements.value.map((p) => {\n    switch (p) {\n      case FIRST_BUTTON:\n        return {id: p, ...firstButtonProps.value}\n      case PREV_BUTTON:\n        return {id: p, ...prevButtonProps.value}\n      case NEXT_BUTTON:\n        return {id: p, ...nextButtonProps.value}\n      case LAST_BUTTON:\n        return {id: p, ...lastButtonProps.value}\n      case FIRST_ELLIPSIS:\n      case LAST_ELLIPSIS:\n        return {id: p, ...ellipsisProps.value}\n      default:\n        return {id: p, ...getPageButtonProps(p)}\n    }\n  })\n\n  if (numberOfPages.value > 3) {\n    if (value > numberOfPages.value - halfLimit.value - lastPage.value) {\n      const idx = 2 + showFirstButton.value\n      els[idx] = {id: els[idx].id, ...getPageButtonProps(els[idx].id, true)}\n    }\n\n    if (value <= halfLimit.value + firstPage.value) {\n      const idx = els.length - (3 + showLastButton.value)\n      els[idx] = {id: els[idx].id, ...getPageButtonProps(els[idx].id, true)}\n    }\n  }\n\n  return els\n})\n\nconst elements = computed(() => {\n  // The idea here is to create an array of all the buttons on the page control.\n  // This way we can keep the invariants in one place and the template code just\n  // iterates over the array.\n\n  const pages = numberOfPages.value\n  const {value} = computedModelValue\n  const limit = limitNumber.value\n  const noEllipsis = props.noEllipsis || limit <= ELLIPSIS_THRESHOLD\n\n  // The first case is when all of the page buttons fit on the control, this is\n  //  the simplest case and the only one that will create an array smaller than\n  //  Limit + 4 - noEndButtons * 2 (the [first, last,] prev, next buttons)\n\n  if (pages < limit + firstPage.value + lastPage.value) {\n    return [\n      !firstPage.value && !noFirstButton.value ? FIRST_BUTTON : null,\n      PREV_BUTTON,\n      ...Array.from({length: pages}, (_, index) => index + 1),\n      NEXT_BUTTON,\n      !lastPage.value && !noLastButton.value ? LAST_BUTTON : null,\n    ].filter((x) => x !== null) as number[]\n  }\n\n  // All of the remaining cases result in an array that is exactly limit + 4 - noEndButtons * 2 in length, so create\n  //  the array upfront and set up the beginning and end buttons, then fill the rest for each case\n\n  const buttons = Array.from({length: limit + 4 - (noFirstButton.value + noLastButton.value)})\n  if (!noFirstButton.value) {\n    if (!firstPage.value) {\n      buttons[0] = FIRST_BUTTON\n      buttons[1] = PREV_BUTTON\n    } else {\n      buttons[0] = PREV_BUTTON\n      buttons[1] = 1\n    }\n  } else {\n    buttons[0] = PREV_BUTTON\n  }\n\n  if (!noLastButton.value) {\n    if (!lastPage.value) {\n      buttons[buttons.length - 1] = LAST_BUTTON\n      buttons[buttons.length - 2] = NEXT_BUTTON\n    } else {\n      buttons[buttons.length - 1] = NEXT_BUTTON\n      buttons[buttons.length - 2] = pages\n    }\n  } else {\n    buttons[buttons.length - 1] = NEXT_BUTTON\n  }\n\n  // The next case is where the page buttons start at the begginning, with\n  //  no ellipsis at the beginning, but one at the end\n\n  if (value <= halfLimit.value + firstPage.value) {\n    for (let index = 1; index <= limit; index++) {\n      buttons[index + 1 - noFirstButton.value] = index + firstPage.value\n    }\n\n    if (!noEllipsis) {\n      buttons[buttons.length - (2 + showLastButton.value)] = LAST_ELLIPSIS\n    }\n  }\n\n  // And then we have the case where the page buttons go up to the end, with no\n  //  ellipsis at the end, but one at the beginning\n\n  if (value > pages - halfLimit.value - lastPage.value) {\n    const start = pages - (limit - 1) - lastPage.value\n    for (let index = 0; index < limit; index++) {\n      buttons[index + 2 - noFirstButton.value] = start + index\n    }\n\n    if (!noEllipsis) {\n      buttons[1 + showFirstButton.value] = FIRST_ELLIPSIS\n    }\n  }\n\n  // Finally we have the case where we have ellipsis at both ends\n  if (!buttons[2]) {\n    // Is there a more elegant way to ceck that we're in the final case?\n    const start = value - Math.floor(limit / 2)\n    for (let index = 0; index < limit; index++) {\n      buttons[index + 2 - noFirstButton.value] = start + index\n    }\n\n    if (!noEllipsis) {\n      buttons[1 + showFirstButton.value] = FIRST_ELLIPSIS\n      buttons[buttons.length - (2 + showLastButton.value)] = LAST_ELLIPSIS\n    }\n  }\n\n  //Enable sanity check for debugging purposes\n  // for (let i = 0; i < buttons.length; i++) {\n  //   if (!buttons[i]) {\n  //     // eslint-disable-next-line no-console\n  //     console.log(\n  //       `Failed: button == ${i}, limit=${limit}, pages=${pages}, firstPage=${firstPage}, lastPage=${lastPage}, value=${value}`\n  //     )\n  //   }\n  // }\n\n  return buttons.filter((x) => x !== null) as number[]\n})\n</script>\n\n<script lang=\"ts\">\nconst DEFAULT_PER_PAGE = 20\nconst DEFAULT_TOTAL_ROWS = 0\n</script>\n"],"names":["PREV_BUTTON","NEXT_BUTTON","_props","__props","props","useDefaults","emit","__emit","modelValue","_useModel","pageElements","useTemplateRef","limitNumber","useToNumber","limit","nanToZero","method","perPageNumber","perPage","totalRowsNumber","totalRows","modelValueNumber","perPageSanitized","computed","Math","max","value","totalRowsSanitized","numberOfPages","ceil","computedFill","align","justifyAlign","alignment","useAlignment","isActivePage","pageNumber","computedModelValue","checkDisabled","num","disabled","firstDisabled","prevDisabled","lastDisabled","nextDisabled","getBaseButtonProps","page","classVal","slotName","textValue","tabIndex","label","position","isActive","hidden","isSmHidden","li","class","active","role","button","is","ariaControls","type","tabindex","text","name","index","content","String","clickHandler","e","pageClick","getButtonProps","getPageButtonProps","pageClass","labelPage","firstButtonProps","firstClass","firstText","labelFirstPage","prevButtonProps","prevClass","prevText","labelPrevPage","nextButtonProps","min","nextClass","nextText","labelNextPage","lastButtonProps","lastClass","lastText","labelLastPage","ellipsisProps","ellipsisClass","span","computedWrapperClasses","size","pills","pagination","pageSize","event","clickEvent","BvEvent","cancelable","target","defaultPrevented","nextTick","focusFirst","focusLast","isDisabled","el","isElement","nodeType","Node","ELEMENT_NODE","hasAttr","hasAttribute","hasClass","classList","contains","getButtons","sort","a","b","parseInt","getAttribute","map","children","filter","tagName","toUpperCase","bcr","getBoundingClientRect","height","width","btn","find","focus","reverse","handleKeyNav","code","shiftKey","CODE_LEFT","CODE_UP","stopEvent","buttons","indexOf","getActiveElement","CODE_RIGHT","CODE_DOWN","length","watch","oldValue","newValue","noFirstButton","noGotoEndButtons","firstNumber","noLastButton","lastNumber","showFirstButton","showLastButton","firstPage","lastPage","halfLimit","floor","pages","els","elements","p","id","idx","noEllipsis","Array","from","_","x","start","_createElementBlock","_normalizeClass","_unref","ariaLabel","onKeydown","_openBlock","_Fragment","_renderList","_mergeProps","key","ref_for","ref","displayIndex","_renderSlot","_ctx","_createTextVNode","_toDisplayString","ellipsisText","_createBlock","_resolveDynamicComponent","onClick","$slots"],"mappings":"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"}