{"version":3,"file":"BFormTags.vue_vue_type_script_setup_true_lang-BhZ8H1n5.mjs","sources":["../src/components/BFormTags/BFormTag.vue","../src/components/BFormTags/BFormTags.vue"],"sourcesContent":["<template>\n  <component\n    :is=\"props.tag\"\n    :id=\"computedId\"\n    :title=\"tagText\"\n    class=\"badge b-form-tag d-inline-flex align-items-center mw-100\"\n    :class=\"computedClasses\"\n    :aria-labelledby=\"taglabelId\"\n  >\n    <span :id=\"taglabelId\" class=\"b-form-tag-content flex-grow-1 text-truncate\">\n      <slot>{{ tagText }}</slot>\n    </span>\n    <BCloseButton\n      v-if=\"!props.disabled && !props.noRemove\"\n      aria-keyshortcuts=\"Delete\"\n      :aria-label=\"props.removeLabel\"\n      class=\"b-form-tag-remove\"\n      :aria-describedby=\"taglabelId\"\n      :aria-controls=\"props.id\"\n      @click=\"emit('remove', tagText)\"\n    />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed} from 'vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport type {BFormTagProps} from '../../types/ComponentProps'\nimport BCloseButton from '../BButton/BCloseButton.vue'\nimport {useColorVariantClasses} from '../../composables/useColorVariantClasses'\nimport type {BFormTagEmits, BFormTagSlots} from '../../types'\n\nconst _props = withDefaults(defineProps<BFormTagProps>(), {\n  disabled: false,\n  id: undefined,\n  noRemove: false,\n  pill: false,\n  removeLabel: 'Remove tag',\n  tag: 'span',\n  title: undefined,\n  variant: 'secondary',\n})\nconst props = useDefaults(_props, 'BFormTag')\nconst emit = defineEmits<BFormTagEmits>()\nconst slots = defineSlots<BFormTagSlots>()\n\nconst computedId = useId(() => props.id)\n\nconst tagText = computed(\n  () => ((slots.default?.({})[0].children ?? '').toString() || props.title) ?? ''\n)\nconst taglabelId = computed(() => `${computedId.value}taglabel__`)\n\nconst colorClasses = useColorVariantClasses(props)\nconst computedClasses = computed(() => [\n  colorClasses.value,\n  {\n    'rounded-pill': props.pill,\n    'disabled': props.disabled,\n  },\n])\n</script>\n","<template>\n  <div\n    :id=\"computedId\"\n    class=\"b-form-tags form-control h-auto\"\n    :class=\"computedClasses\"\n    role=\"group\"\n    tabindex=\"-1\"\n    @focusin=\"onFocusin\"\n    @focusout=\"emit('focusout', $event)\"\n  >\n    <output\n      :id=\"`${computedId}selected_tags__`\"\n      class=\"visually-hidden\"\n      :for=\"_inputId\"\n      :aria-live=\"focused ? 'polite' : 'off'\"\n      aria-atomic=\"true\"\n      aria-relevant=\"additions text\"\n      >{{ tags.join(', ') }}</output\n    >\n    <div\n      :id=\"`${computedId}removed_tags__`\"\n      role=\"status\"\n      :aria-live=\"focused ? 'assertive' : 'off'\"\n      aria-atomic=\"true\"\n      class=\"visually-hidden\"\n    >\n      ({{ props.tagRemovedLabel }}) {{ lastRemovedTag }}\n    </div>\n\n    <slot\n      :add-button-text=\"props.addButtonText\"\n      :add-button-variant=\"props.addButtonVariant\"\n      :add-tag\n      :disable-add-button=\"disableAddButton\"\n      :disabled=\"props.disabled\"\n      :duplicate-tag-text=\"props.duplicateTagText\"\n      :duplicate-tags=\"duplicateTags\"\n      :form=\"props.form\"\n      :input-attrs=\"{\n        ...props.inputAttrs,\n        disabled: props.disabled,\n        form: props.form,\n        id: _inputId,\n        value: inputValue,\n      }\"\n      :input-class=\"props.inputClass\"\n      :input-handlers=\"{\n        input: onInput,\n        keydown: onKeydown,\n        change: onChange,\n      }\"\n      :input-id=\"_inputId\"\n      :input-type=\"props.inputType\"\n      :invalid-tag-text=\"props.invalidTagText\"\n      :invalid-tags\n      :is-duplicate\n      :is-invalid\n      :is-limit-reached=\"isLimitReached\"\n      :limit-tags-text=\"props.limitTagsText\"\n      :limit=\"limitNumber\"\n      :no-tag-remove=\"props.noTagRemove\"\n      :placeholder=\"props.placeholder\"\n      :remove-tag\n      :required=\"props.required\"\n      :separator=\"props.separator\"\n      :size=\"props.size\"\n      :state=\"props.state\"\n      :tag-class=\"props.tagClass\"\n      :tag-pills=\"props.tagPills\"\n      :tag-remove-label=\"props.tagRemoveLabel\"\n      :tag-variant=\"props.tagVariant\"\n      :tags\n    >\n      <ul\n        :id=\"`${computedId}tag_list__`\"\n        class=\"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center\"\n      >\n        <template v-for=\"(tag, index) in tags\" :key=\"index\">\n          <slot\n            name=\"tag\"\n            :tag=\"tag\"\n            :tag-class=\"props.tagClass\"\n            :tag-variant=\"props.tagVariant\"\n            :tag-pills=\"props.tagPills\"\n            :remove-tag=\"removeTag\"\n          >\n            <BFormTag\n              :key=\"tag\"\n              :class=\"props.tagClass\"\n              tag=\"li\"\n              :variant=\"props.tagVariant\"\n              :pill=\"props.tagPills\"\n              @remove=\"removeTag\"\n              >{{ tag }}</BFormTag\n            >\n          </slot>\n        </template>\n        <li\n          role=\"none\"\n          aria-live=\"off\"\n          class=\"b-from-tags-field flex-grow-1\"\n          :aria-controls=\"`${computedId}tag_list__`\"\n        >\n          <div role=\"group\" class=\"d-flex\">\n            <input\n              :id=\"_inputId\"\n              ref=\"_input\"\n              :disabled=\"props.disabled\"\n              :value=\"inputValue\"\n              :type=\"props.inputType\"\n              :placeholder=\"props.placeholder\"\n              class=\"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0\"\n              style=\"outline: currentcolor none 0px; min-width: 5rem\"\n              v-bind=\"props.inputAttrs\"\n              :form=\"props.form\"\n              :required=\"props.required || undefined\"\n              :aria-required=\"props.required || undefined\"\n              @input=\"onInput\"\n              @change=\"onChange\"\n              @focus=\"onFocus\"\n              @blur=\"onBlur\"\n            />\n            <button\n              v-if=\"disableAddButton\"\n              type=\"button\"\n              class=\"btn b-form-tags-button py-0\"\n              :class=\"[\n                inputClass,\n                {\n                  [`btn-${props.addButtonVariant}`]: props.addButtonVariant !== null,\n                  'disabled invisible': inputValue.length === 0,\n                },\n              ]\"\n              style=\"font-size: 90%\"\n              :disabled=\"props.disabled || inputValue.length === 0 || isLimitReached\"\n              @click=\"addTag(inputValue)\"\n            >\n              <slot name=\"add-button-text\">{{ props.addButtonText }}</slot>\n            </button>\n          </div>\n        </li>\n      </ul>\n      <div :aria-live=\"props.feedbackAriaLive\" aria-atomic=\"true\">\n        <div v-if=\"isInvalid\" class=\"d-block invalid-feedback\">\n          {{ props.invalidTagText }}: {{ inputValue }}\n        </div>\n        <small v-if=\"isDuplicate\" class=\"form-text text-body-secondary\"\n          >{{ props.duplicateTagText }}: {{ inputValue }}</small\n        >\n        <small v-if=\"tags.length === props.limit\" class=\"form-text text-body-secondary\">\n          {{ props.limitTagsText }}</small\n        >\n      </div>\n    </slot>\n    <template v-if=\"props.name\">\n      <input\n        v-for=\"(tag, index) in tags\"\n        :key=\"index\"\n        type=\"hidden\"\n        :name=\"props.name\"\n        :value=\"tag\"\n      />\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {onKeyStroke, syncRef, useFocus, useToNumber} from '@vueuse/core'\nimport {computed, ref, useTemplateRef} from 'vue'\nimport {useDefaults} from '../../composables/useDefaults'\nimport type {BFormTagsProps} from '../../types/ComponentProps'\nimport {escapeRegExpChars} from '../../utils/stringUtils'\nimport BFormTag from './BFormTag.vue'\nimport {useId} from '../../composables/useId'\nimport {useStateClass} from '../../composables/useStateClass'\nimport type {BFormTagsEmits, BFormTagsSlots} from '../../types'\n\nconst _props = withDefaults(defineProps<Omit<BFormTagsProps, 'modelValue'>>(), {\n  addButtonText: 'Add',\n  addButtonVariant: 'outline-secondary',\n  addOnChange: false,\n  autofocus: false,\n  disabled: false,\n  duplicateTagText: 'Duplicate tag(s)',\n  feedbackAriaLive: 'assertive',\n  form: undefined,\n  inputAttrs: undefined,\n  inputClass: undefined,\n  inputId: undefined,\n  inputType: 'text',\n  invalidTagText: 'Invalid tag(s)',\n  limit: undefined,\n  limitTagsText: 'Tag limit reached',\n  name: undefined,\n  noAddOnEnter: false,\n  noOuterFocus: false,\n  noTagRemove: false,\n  placeholder: 'Add tag...',\n  removeOnDelete: false,\n  required: false,\n  separator: undefined,\n  size: 'md',\n  state: null,\n  tagClass: undefined,\n  tagPills: false,\n  tagRemoveLabel: undefined,\n  tagRemovedLabel: 'Tag removed',\n  tagValidator: () => true,\n  tagVariant: 'secondary',\n})\nconst props = useDefaults(_props, 'BFormTags')\nconst emit = defineEmits<BFormTagsEmits>()\ndefineSlots<BFormTagsSlots>()\n\nconst modelValue = defineModel<Exclude<BFormTagsProps['modelValue'], undefined>>({\n  default: () => [],\n})\n\nconst computedId = useId()\n\nconst limitNumber = useToNumber(() => props.limit ?? NaN)\n\nconst stateClass = useStateClass(() => props.state)\n\nconst input = useTemplateRef('_input')\n\nconst {focused} = useFocus(input, {\n  initialValue: props.autofocus,\n})\n\nconst _inputId = computed(() => props.inputId || `${computedId.value}input__`)\nconst tags = ref<string[]>([...modelValue.value])\nconst inputValue = ref<string>('')\nconst shouldRemoveOnDelete = ref<boolean>(modelValue.value.length > 0)\nconst lastRemovedTag = ref<string>('')\nconst validTags = ref<string[]>([])\nconst invalidTags = ref<string[]>([])\nconst duplicateTags = ref<string[]>([])\n\nsyncRef(modelValue, tags, {\n  direction: 'ltr',\n  transform: {\n    ltr: (v) => [...v],\n  },\n})\n\nconst computedClasses = computed(() => [\n  stateClass.value,\n  {\n    [`form-control-${props.size}`]: props.size !== 'md',\n    disabled: props.disabled,\n    focus: focused.value,\n  },\n])\n\nconst isDuplicate = computed(() => tags.value.includes(inputValue.value))\nconst isInvalid = computed(() =>\n  inputValue.value === '' ? false : !props.tagValidator(inputValue.value)\n)\nconst isLimitReached = computed(() => tags.value.length === limitNumber.value)\nconst disableAddButton = computed(() => !isInvalid.value && !isDuplicate.value)\n\nconst onFocusin = (e: Readonly<FocusEvent>): void => {\n  if (props.disabled) {\n    const target = e.target as HTMLDivElement\n    target.blur()\n    return\n  }\n\n  emit('focusin', e)\n}\n\nconst onFocus = (e: Readonly<FocusEvent>): void => {\n  if (props.disabled || props.noOuterFocus) {\n    return\n  }\n\n  focused.value = true\n  emit('focus', e)\n}\n\nconst onBlur = (e: Readonly<FocusEvent>): void => {\n  focused.value = false\n  emit('blur', e)\n}\n\nconst onInput = (e: Readonly<Event> | string): void => {\n  const value = typeof e === 'string' ? e : (e.target as HTMLInputElement).value\n\n  shouldRemoveOnDelete.value = false\n\n  if (props.separator?.includes(value.charAt(0)) && value.length > 0) {\n    if (input.value) {\n      input.value.value = ''\n    }\n    return\n  }\n\n  inputValue.value = value\n\n  if (props.separator?.includes(value.charAt(value.length - 1))) {\n    addTag(value.slice(0, value.length - 1))\n    return\n  }\n\n  validTags.value = props.tagValidator(value) && !isDuplicate.value ? [value] : []\n  invalidTags.value = props.tagValidator(value) ? [] : [value]\n  duplicateTags.value = isDuplicate.value ? [value] : []\n\n  emit('tag-state', validTags.value, invalidTags.value, duplicateTags.value)\n}\n\nconst onChange = (e: Readonly<Event>): void => {\n  if (props.addOnChange) {\n    onInput(e)\n\n    if (!isDuplicate.value) {\n      addTag(inputValue.value)\n    }\n  }\n}\n\nconst onKeydown = (e: Readonly<KeyboardEvent>): void => {\n  if (e.key === 'Enter' && !props.noAddOnEnter) {\n    addTag(inputValue.value)\n    return\n  }\n\n  if (\n    (e.key === 'Backspace' || e.key === 'Delete') &&\n    props.removeOnDelete &&\n    inputValue.value === '' &&\n    shouldRemoveOnDelete.value &&\n    tags.value.length > 0\n  ) {\n    removeTag(tags.value[tags.value.length - 1])\n  } else {\n    shouldRemoveOnDelete.value = true\n  }\n}\n\nonKeyStroke(onKeydown, {target: input})\n\nconst separator = computed(() => {\n  if (!props.separator) {\n    return\n  }\n\n  return typeof props.separator === 'string' ? props.separator : props.separator.join('')\n})\n\nconst separatorRegExp = computed(() => {\n  if (!separator.value) {\n    return\n  }\n\n  return new RegExp(`[${escapeRegExpChars(separator.value)}]+`)\n})\n\nconst addTag = (tag?: string): void => {\n  tag = (tag ?? inputValue.value).trim()\n\n  const newTags = separatorRegExp.value\n    ? tag.split(separatorRegExp.value).map((t) => t.trim())\n    : [tag]\n  const validTags: string[] = []\n\n  for (const newTag of newTags) {\n    if (newTag === '' || isDuplicate.value || !props.tagValidator(newTag)) {\n      continue\n    }\n\n    if (limitNumber.value && isLimitReached.value) {\n      break\n    }\n\n    validTags.push(newTag)\n  }\n\n  const newValue = [...modelValue.value, ...validTags]\n  inputValue.value = ''\n  shouldRemoveOnDelete.value = true\n  modelValue.value = newValue\n  focused.value = true\n}\n\nconst removeTag = (tag?: string): void => {\n  const tagIndex = tags.value.indexOf(tag?.toString() ?? '')\n  if (tagIndex === -1) return\n  lastRemovedTag.value = tags.value.splice(tagIndex, 1).toString()\n  modelValue.value = tags.value\n}\n\ndefineExpose({\n  blur: () => {\n    focused.value = false\n  },\n  element: input,\n  focus: () => {\n    focused.value = true\n  },\n  inputValue,\n})\n</script>\n"],"names":["_useSlots","_createBlock","_resolveDynamicComponent","_unref","_normalizeClass","_createElementVNode","_renderSlot","BCloseButton","_useModel","validTags","_createElementBlock","_toDisplayString","_openBlock","_Fragment","_renderList","BFormTag","_mergeProps","inputClass","_createTextVNode"],"mappings":"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"}