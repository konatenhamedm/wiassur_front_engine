{"version":3,"file":"index.umd.js","sources":["../../../../src/directives/BPopover/index.ts"],"sourcesContent":["import {type Directive, type Ref} from 'vue'\nimport {\n  bind,\n  type ElementWithPopper,\n  resolveActiveStatus,\n  resolveContent,\n  resolveDirectiveProps,\n  unbind,\n} from '../../utils/floatingUi'\nimport {defaultsKey} from '../../utils/keys'\nimport {findProvides} from '../utils'\n\nexport const vBPopover: Directive<ElementWithPopper> = {\n  mounted(el, binding, vnode) {\n    const defaults = (findProvides(binding, vnode) as Record<symbol, Ref>)[defaultsKey]?.value\n    const isActive = resolveActiveStatus(binding.value)\n    if (!isActive) return\n\n    const text = resolveContent(binding.value, el)\n\n    if (!text.body && !text.title) return\n    el.$__binding = JSON.stringify([binding.modifiers, binding.value])\n    bind(el, binding, {\n      ...(defaults['BPopover'] || undefined),\n      ...resolveDirectiveProps(binding, el),\n      ...text,\n    })\n  },\n  updated(el, binding, vnode) {\n    const defaults = (findProvides(binding, vnode) as Record<symbol, Ref>)[defaultsKey]?.value\n\n    const isActive = resolveActiveStatus(binding.value)\n    if (!isActive) return\n\n    const text = resolveContent(binding.value, el)\n\n    if (!text.body && !text.title) return\n    delete binding.oldValue\n    if (el.$__binding === JSON.stringify([binding.modifiers, binding.value])) return\n    unbind(el)\n    bind(el, binding, {\n      ...(defaults['BPopover'] || undefined),\n      ...resolveDirectiveProps(binding, el),\n      ...text,\n    })\n    el.$__binding = JSON.stringify([binding.modifiers, binding.value])\n  },\n  beforeUnmount(el) {\n    unbind(el)\n  },\n}\n"],"names":["vBPopover","mounted","el","binding","vnode","defaults","findProvides","defaultsKey","value","resolveActiveStatus","text","resolveContent","body","title","$__binding","JSON","stringify","modifiers","bind","resolveDirectiveProps","updated","oldValue","unbind","beforeUnmount"],"mappings":"iOAYaA,EAA0C,CACrD,OAAAC,CAAQC,EAAIC,EAASC,GACnB,MAAMC,EAAYC,EAAAA,aAAaH,EAASC,GAA+BG,EAAAA,cAAcC,MAErF,IADiBC,EAAAA,oBAAoBN,EAAQK,OAC9B,OAEf,MAAME,EAAOC,EAAAA,eAAeR,EAAQK,MAAON,IAEtCQ,EAAKE,MAASF,EAAKG,SACxBX,EAAGY,WAAaC,KAAKC,UAAU,CAACb,EAAQc,UAAWd,EAAQK,QAC3DU,EAAAA,KAAKhB,EAAIC,EAAS,IACZE,EAAmB,eAAK,KACzBc,EAAAA,sBAAsBhB,EAASD,MAC/BQ,IAEP,EACA,OAAAU,CAAQlB,EAAIC,EAASC,GACnB,MAAMC,EAAYC,EAAAA,aAAaH,EAASC,GAA+BG,EAAAA,cAAcC,MAGrF,IADiBC,EAAAA,oBAAoBN,EAAQK,OAC9B,OAEf,MAAME,EAAOC,EAAAA,eAAeR,EAAQK,MAAON,IAEtCQ,EAAKE,MAASF,EAAKG,gBACjBV,EAAQkB,SACXnB,EAAGY,aAAeC,KAAKC,UAAU,CAACb,EAAQc,UAAWd,EAAQK,UACjEc,EAAAA,OAAOpB,GACPgB,EAAAA,KAAKhB,EAAIC,EAAS,IACZE,EAAmB,eAAK,KACzBc,EAAAA,sBAAsBhB,EAASD,MAC/BQ,IAELR,EAAGY,WAAaC,KAAKC,UAAU,CAACb,EAAQc,UAAWd,EAAQK,SAC7D,EACA,aAAAe,CAAcrB,GACZoB,EAAAA,OAAOpB,EACT"}