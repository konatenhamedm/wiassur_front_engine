{"version":3,"file":"BFormSpinbutton.vue_vue_type_script_setup_true_lang-BVYdhWlC.js","sources":["../src/components/BFormSpinbutton/BFormSpinbutton.vue","../src/composables/useRtl.ts"],"sourcesContent":["<template>\n  <div\n    ref=\"_element\"\n    class=\"b-form-spinbutton form-control\"\n    :class=\"computedClasses\"\n    role=\"group\"\n    :lang=\"computedLocale\"\n    :tabindex=\"props.disabled ? undefined : '-1'\"\n    :title=\"props.ariaLabel\"\n    @click=\"focused = true\"\n  >\n    <!-- eslint-disable-next-line prettier/prettier -->\n    <!-- prettier-ignore -->\n    <slot :name=\"(buttons.top.slot.name as 'increment' | 'decrement')\" :has-focus=\"focused\">\n      <button\n        v-bind=\"buttons.top.button\"\n        @mousedown=\"buttons.top.handler\"\n        @touchstart=\"buttons.top.handler\"\n      >\n        <svg v-bind=\"buttons.top.svg\">\n          <path v-bind=\"buttons.top.path\" />\n        </svg>\n      </button>\n    </slot>\n    <input\n      v-if=\"props.name && !props.disabled\"\n      key=\"hidden\"\n      type=\"hidden\"\n      :name=\"props.name\"\n      :form=\"props.form\"\n      :value=\"valueAsFixed\"\n    />\n    <output\n      :id=\"computedId\"\n      key=\"output\"\n      class=\"flex-grow-1\"\n      :class=\"computedSpinClasses\"\n      :dir=\"(isRtl ?? false) ? 'rtl' : 'ltr'\"\n      :tabindex=\"props.disabled ? undefined : '0'\"\n      role=\"spinbutton\"\n      aria-live=\"off\"\n      :aria-label=\"props.ariaLabel || undefined\"\n      :aria-invalid=\"\n        props.state === false || (!modelValue !== null && props.required) ? true : undefined\n      \"\n      :aria-required=\"props.required ? true : undefined\"\n      :aria-valuemin=\"computedMin\"\n      :aria-valuemax=\"computedMax\"\n      :aria-valuenow=\"modelValue !== null ? modelValue : undefined\"\n      :aria-valuetext=\"modelValue !== null ? computedFormatter(modelValue) : undefined\"\n    >\n      <bdi>\n        {{ (modelValue !== null ? computedFormatter(modelValue) : props.placeholder) || '' }}\n      </bdi>\n    </output>\n    <!-- eslint-disable-next-line prettier/prettier -->\n    <!-- prettier-ignore -->\n    <slot :name=\"(buttons.bottom.slot.name as 'increment' | 'decrement')\" :has-focus=\"focused\">\n      <button\n        v-bind=\"buttons.bottom.button\"\n        @mousedown=\"buttons.bottom.handler\"\n        @touchstart=\"buttons.bottom.handler\"\n      >\n        <svg v-bind=\"buttons.bottom.svg\">\n          <path v-bind=\"buttons.bottom.path\" />\n        </svg>\n      </button>\n    </slot>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {computed, useTemplateRef} from 'vue'\nimport type {BFormSpinbuttonProps} from '../../types/ComponentProps'\nimport {eventOnOff, stopEvent} from '../../utils/event'\nimport {\n  CODE_DOWN,\n  CODE_END,\n  CODE_HOME,\n  CODE_PAGEDOWN,\n  CODE_PAGEUP,\n  CODE_UP,\n} from '../../utils/constants'\nimport {onKeyStroke, useFocus, useToNumber} from '@vueuse/core'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {useRtl} from '../../composables/useRtl'\nimport type {ButtonType} from '../../types/ButtonType'\nimport type {BFormSpinbuttonEmits, BFormSpinbuttonSlots} from '../../types'\n\nconst KEY_CODES = [CODE_UP, CODE_DOWN, CODE_HOME, CODE_END, CODE_PAGEUP, CODE_PAGEDOWN]\n\nconst _props = withDefaults(defineProps<Omit<BFormSpinbuttonProps, 'modelValue'>>(), {\n  ariaControls: undefined,\n  ariaLabel: undefined,\n  disabled: false,\n  form: undefined,\n  formatterFn: undefined,\n  id: undefined,\n  inline: false,\n  labelDecrement: 'Decrement',\n  labelIncrement: 'Increment',\n  locale: undefined,\n  max: defaultValues.max,\n  min: defaultValues.min,\n  name: undefined,\n  placeholder: undefined,\n  readonly: false,\n  repeatDelay: defaultValues.repeatDelay,\n  repeatInterval: defaultValues.repeatInterval,\n  repeatStepMultiplier: defaultValues.repeatMultiplier,\n  repeatThreshold: defaultValues.repeatThreshold,\n  required: false,\n  size: undefined,\n  state: null,\n  step: defaultValues.step,\n  vertical: false,\n  wrap: false,\n})\nconst props = useDefaults(_props, 'BFormSpinbutton')\nconst emit = defineEmits<BFormSpinbuttonEmits>()\ndefineSlots<BFormSpinbuttonSlots>()\n\nconst modelValue = defineModel<Exclude<BFormSpinbuttonProps['modelValue'], undefined>>({\n  default: null,\n})\n\nconst element = useTemplateRef('_element')\n\nconst {focused} = useFocus(element)\n\nconst computedId = useId(() => props.id, 'spinbutton')\n\nconst computedClasses = computed(() => ({\n  'disabled': props.disabled,\n  'readonly': props.readonly,\n  'focus': focused.value,\n  'd-inline-flex': props.inline || props.vertical,\n  'd-flex': !props.inline && !props.vertical,\n  'align-items-stretch': !props.vertical,\n  'flex-column': props.vertical,\n  [`form-control-${props.size}`]: props.size !== undefined,\n}))\n\nconst computedSpinClasses = computed(() => ({\n  'd-flex': props.vertical,\n  'align-self-center': !props.vertical,\n  'align-items-center': props.vertical,\n  'border-top': props.vertical,\n  'border-bottom': props.vertical,\n  'border-start': !props.vertical,\n  'border-end': !props.vertical,\n}))\n\n//non reactive properties\nlet $_autoDelayTimer: ReturnType<typeof setTimeout> | undefined\nlet $_autoRepeatTimer: ReturnType<typeof setTimeout> | undefined\nlet $_keyIsDown = false\n\n// const computedInline = computed(() => props.inline && !props.vertical)\n\n// const computedReadonly = computed(() => props.readonly && !props.disabled)\n\nconst stepNumber = useToNumber(() => props.step)\nconst computedStep = computed(() =>\n  Number.isNaN(stepNumber.value) ? defaultValues.step : stepNumber.value\n)\n\nconst minNumber = useToNumber(() => props.min)\nconst computedMin = computed(() =>\n  Number.isNaN(minNumber.value) ? defaultValues.min : minNumber.value\n)\n\nconst maxNumber = useToNumber(() => props.max)\nconst computedMax = computed(() => {\n  const step = computedStep.value\n  const min = computedMin.value\n  return Math.floor((maxNumber.value - min) / step) * step + min\n})\n\nconst repeatDelayNumber = useToNumber(() => props.repeatDelay, {\n  nanToZero: true,\n  method: 'parseInt',\n})\nconst computedDelay = computed(() =>\n  repeatDelayNumber.value > 0 ? repeatDelayNumber.value : defaultValues.repeatDelay\n)\n\nconst repeatIntervalNumber = useToNumber(() => props.repeatInterval, {\n  nanToZero: true,\n  method: 'parseInt',\n})\nconst computedInterval = computed(() =>\n  repeatIntervalNumber.value > 0 ? repeatIntervalNumber.value : defaultValues.repeatInterval\n)\n\nconst repeatThresholdNumber = useToNumber(() => props.repeatThreshold, {\n  nanToZero: true,\n  method: 'parseInt',\n})\nconst computedThreshold = computed(() =>\n  Math.max(\n    Number.isNaN(repeatThresholdNumber.value)\n      ? defaultValues.repeatThreshold\n      : repeatThresholdNumber.value,\n    1\n  )\n)\n\nconst repeatStepMultiplierNumber = useToNumber(() => props.repeatStepMultiplier, {\n  nanToZero: true,\n  method: 'parseInt',\n})\nconst computedStepMultiplier = computed(() =>\n  Math.max(\n    Number.isNaN(repeatStepMultiplierNumber.value)\n      ? defaultValues.repeatMultiplier\n      : repeatStepMultiplierNumber.value,\n    1\n  )\n)\n\nconst computedPrecision = computed(() => {\n  const step = computedStep.value\n  return Math.floor(step) === step ? 0 : (step.toString().split('.')[1] || '').length\n})\n\nconst computedMultiplier = computed(() => Math.pow(10, computedPrecision.value || 0))\n\nconst valueAsFixed = computed(() =>\n  modelValue.value === null ? '' : modelValue.value.toFixed(computedPrecision.value)\n)\n\nconst {isRtl, locale: globalLocale} = useRtl()\n\nconst computedLocale = computed(() => {\n  const loc = (props.locale ?? globalLocale?.value) || 'locale'\n  const locales = [loc]\n  const nf = new Intl.NumberFormat(locales)\n  return nf.resolvedOptions().locale\n})\n\nconst defaultFormatter = () =>\n  new Intl.NumberFormat(computedLocale.value, {\n    style: 'decimal',\n    useGrouping: false,\n    minimumIntegerDigits: 1,\n    minimumFractionDigits: computedPrecision.value,\n    maximumFractionDigits: computedPrecision.value,\n    notation: 'standard',\n  }).format\n\nconst computedFormatter = computed(() => props.formatterFn ?? defaultFormatter())\n\nconst stepValue = (direction: number) => {\n  // Sets a new incremented or decremented value, supporting optional wrapping\n  // Direction is either +1 or -1 (or a multiple thereof)\n  let {value} = modelValue\n  if (!props.disabled && value !== null) {\n    const step = computedStep.value * direction\n    const min = computedMin.value\n    const max = computedMax.value\n    const multiplier = computedMultiplier.value\n    const {wrap} = props\n    // We ensure that the value steps like a native input\n    value = Math.round((value - min) / step) * step + min + step\n    // We ensure that precision is maintained (decimals)\n    value = Math.round(value * multiplier) / multiplier\n    // Handle if wrapping is enabled\n    modelValue.value = value > max ? (wrap ? min : max) : value < min ? (wrap ? max : min) : value\n  }\n}\n\nconst stepUp = (multiplier = 1) => {\n  if (modelValue.value === null) {\n    modelValue.value = computedMin.value\n    return\n  }\n  stepValue(+1 * multiplier)\n}\n\nconst stepDown = (multiplier = 1) => {\n  if (modelValue.value === null) {\n    modelValue.value = props.wrap ? computedMax.value : computedMin.value\n    return\n  }\n  stepValue(-1 * multiplier)\n}\n\nonKeyStroke(\n  KEY_CODES,\n  (event) => {\n    const {code, altKey, ctrlKey, metaKey} = event\n\n    if (props.disabled || props.readonly || altKey || ctrlKey || metaKey) return\n\n    // https://w3c.github.io/aria-practices/#spinbutton\n    stopEvent(event, {immediatePropagation: true})\n    if ($_keyIsDown) {\n      // Keypress is already in progress\n      return\n    }\n\n    resetTimers()\n    if ([CODE_UP, CODE_DOWN].includes(code)) {\n      // The following use the custom auto-repeat handling\n\n      $_keyIsDown = true\n      if (code === CODE_UP) {\n        handleStepRepeat(event, stepUp)\n        return\n      }\n      if (code === CODE_DOWN) {\n        handleStepRepeat(event, stepDown)\n      }\n      return\n    }\n    // These use native OS key repeating\n    if (code === CODE_PAGEUP) {\n      stepUp(computedStepMultiplier.value)\n      return\n    }\n    if (code === CODE_PAGEDOWN) {\n      stepDown(computedStepMultiplier.value)\n      return\n    }\n    if (code === CODE_HOME) {\n      modelValue.value = computedMin.value\n      return\n    }\n    if (code === CODE_END) {\n      modelValue.value = computedMax.value\n    }\n  },\n  {target: element, eventName: 'keydown'}\n)\n\nonKeyStroke(\n  KEY_CODES,\n  (event: Readonly<KeyboardEvent>) => {\n    // Emit a change event when the keyup happens\n\n    const {altKey, ctrlKey, metaKey} = event\n\n    if (props.disabled || props.readonly || altKey || ctrlKey || metaKey) return\n\n    stopEvent(event, {immediatePropagation: true})\n    resetTimers()\n    $_keyIsDown = false\n    emit('change', modelValue.value)\n  },\n  {target: element, eventName: 'keyup'}\n)\n\n// takes in a mount or Keyboard Event\nconst handleStepRepeat = (event: Readonly<Event>, stepper: (step: number) => void) => {\n  const {type} = event || {}\n\n  if (!props.disabled && !props.readonly) {\n    if (isMouseEvent(event)) {\n      // We only respond to left (main === 0) button clicks\n      if (type === 'mousedown' && event.button) return\n    }\n    resetTimers()\n    // Step the counter initially\n    stepper(1)\n    const threshold = computedThreshold.value\n    const multiplier = computedStepMultiplier.value\n    const delay = computedDelay.value\n    const interval = computedInterval.value\n\n    // Initiate the delay/repeat interval\n    $_autoDelayTimer = setTimeout(() => {\n      let count = 0\n      $_autoRepeatTimer = setInterval(() => {\n        // After N initial repeats, we increase the incrementing step amount\n        // We do this to minimize screen reader announcements of the value\n        // (values are announced every change, which can be chatty for SR users)\n        // And to make it easer to select a value when the range is large\n        stepper(count < threshold ? 1 : multiplier)\n        count++\n      }, interval)\n    }, delay)\n  }\n}\n\nconst isMouseEvent = (evt: Readonly<Event>): evt is MouseEvent =>\n  evt.type === 'mouseup' || evt.type === 'mousedown'\n\nconst onMouseup: EventListener = (event: Readonly<Event>) => {\n  // `<body>` listener, only enabled when mousedown starts\n\n  if (isMouseEvent(event)) {\n    if (event.type === 'mouseup' && event.button) {\n      // Ignore non left button (main === 0) mouse button click\n      return\n    }\n  }\n\n  stopEvent(event, {immediatePropagation: true})\n  resetTimers()\n  setMouseup(false)\n  // Trigger the change event\n  emit('change', modelValue.value)\n}\n\nconst setMouseup = (on: boolean) => {\n  // Enable or disabled the body mouseup/touchend handlers\n  // Use try/catch to handle case when called server side\n  try {\n    eventOnOff(on, [document.body, 'mouseup', onMouseup, false])\n    eventOnOff(on, [document.body, 'touchend', onMouseup, false])\n  } catch {\n    /* empty */\n  }\n}\nconst resetTimers = () => {\n  clearTimeout($_autoDelayTimer)\n  clearInterval($_autoRepeatTimer)\n  $_autoDelayTimer = undefined\n  $_autoRepeatTimer = undefined\n}\n\nconst buttons = computed(() => {\n  const incrementSvgAttrs = {\n    svg: {\n      xmlns: 'http://www.w3.org/2000/svg',\n      width: '16',\n      height: '16',\n      fill: 'currentColor',\n      class: 'bi bi-plus',\n      viewBox: '0 0 16 16',\n    },\n    path: {\n      d: 'M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z',\n    },\n  } as const\n\n  const decrementSvgAttrs = {\n    svg: {\n      xmlns: 'http://www.w3.org/2000/svg',\n      width: '16',\n      height: '16',\n      fill: 'currentColor',\n      class: 'bi bi-dash',\n      viewBox: '0 0 16 16',\n    },\n    path: {d: 'M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z'},\n  } as const\n\n  const sharedButtonAttrs = {\n    'class': [{'py-0': !props.vertical}, 'btn', 'btn-sm', 'border-0', 'rounded-0'],\n    'tabindex': '-1',\n    'type': 'button' as ButtonType,\n    'disabled': props.disabled || props.readonly,\n    'aria-disabled': props.disabled || props.readonly ? true : undefined,\n    'aria-controls': computedId.value,\n  }\n\n  const sharedSvgAttrs = {\n    'aria-hidden': true,\n    'scale': focused.value ? 1.5 : 1.25,\n  }\n\n  const handler = (event: Readonly<Event>, stepper: (multiplier?: number) => void) => {\n    if (!props.disabled && !props.readonly) {\n      stopEvent(event, {immediatePropagation: true})\n      setMouseup(true)\n      // Since we `preventDefault()`, we must manually focus the button\n      // Though it's likely captured from the element click focus\n      focused.value = true\n      handleStepRepeat(event, stepper)\n    }\n  }\n\n  const incrementAttrs = {\n    button: {\n      ...sharedButtonAttrs,\n      'aria-label': props.labelIncrement || undefined,\n      'aria-keyshortcuts': 'ArrowUp',\n    },\n    svg: {\n      ...sharedSvgAttrs,\n      ...incrementSvgAttrs.svg,\n    },\n    path: {\n      ...incrementSvgAttrs.path,\n    },\n    slot: {\n      name: 'increment',\n    },\n    handler: (e: Event) => handler(e, stepUp),\n  }\n\n  const decrementAttrs = {\n    button: {\n      ...sharedButtonAttrs,\n      'aria-label': props.labelDecrement || undefined,\n      'aria-keyshortcuts': 'ArrowDown',\n    },\n    svg: {\n      ...sharedSvgAttrs,\n      ...decrementSvgAttrs.svg,\n    },\n    path: {\n      ...decrementSvgAttrs.path,\n    },\n    slot: {\n      name: 'decrement',\n    },\n    handler: (e: Readonly<Event>) => handler(e, stepDown),\n  }\n\n  return {\n    top: {\n      ...(props.vertical ? incrementAttrs : decrementAttrs),\n    },\n    bottom: {\n      ...(!props.vertical ? incrementAttrs : decrementAttrs),\n    },\n  }\n})\n</script>\n\n<script lang=\"ts\">\nconst defaultValues = {\n  min: 1,\n  max: 100,\n  step: 1,\n  repeatDelay: 500,\n  repeatInterval: 100,\n  repeatThreshold: 10,\n  repeatMultiplier: 4,\n} as const\n</script>\n","import {inject, onMounted, watch} from 'vue'\nimport {rtlRegistryKey} from '../utils/keys'\n\nexport const useRtl = () => {\n  const rtlPlugin = inject(rtlRegistryKey)\n\n  onMounted(() => {\n    // I can't think of a reason why one might want to destroy these if unmounted...\n    watch(\n      () => rtlPlugin?.locale.value,\n      (newValue) => {\n        const html = document.documentElement\n        html.setAttribute('lang', newValue ?? '')\n      },\n      {immediate: true}\n    )\n\n    watch(\n      () => rtlPlugin?.isRtl.value,\n      (newValue) => {\n        const html = document.documentElement\n        html.setAttribute('dir', (newValue ?? false) ? 'rtl' : 'ltr')\n      },\n      {immediate: true}\n    )\n  })\n\n  return {...rtlPlugin}\n}\n"],"names":["defaultValues","KEY_CODES","CODE_UP","CODE_DOWN","CODE_HOME","CODE_END","CODE_PAGEUP","CODE_PAGEDOWN","_props","__props","props","useDefaults","emit","__emit","modelValue","_useModel","element","useTemplateRef","focused","useFocus","computedId","useId","id","computedClasses","computed","disabled","readonly","focus","value","inline","vertical","size","computedSpinClasses","$_autoDelayTimer","$_autoRepeatTimer","$_keyIsDown","stepNumber","useToNumber","step","computedStep","Number","isNaN","minNumber","min","computedMin","maxNumber","max","computedMax","Math","floor","repeatDelayNumber","repeatDelay","nanToZero","method","computedDelay","repeatIntervalNumber","repeatInterval","computedInterval","repeatThresholdNumber","repeatThreshold","computedThreshold","repeatStepMultiplierNumber","repeatStepMultiplier","computedStepMultiplier","computedPrecision","toString","split","length","computedMultiplier","pow","valueAsFixed","toFixed","isRtl","locale","globalLocale","rtlPlugin","inject","rtlRegistryKey","onMounted","watch","newValue","document","documentElement","setAttribute","immediate","useRtl","computedLocale","locales","Intl","NumberFormat","resolvedOptions","computedFormatter","formatterFn","style","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","notation","format","stepValue","direction","multiplier","wrap","round","stepUp","stepDown","onKeyStroke","event","code","altKey","ctrlKey","metaKey","stopEvent","immediatePropagation","resetTimers","includes","handleStepRepeat","target","eventName","stepper","type","isMouseEvent","button","threshold","delay","interval","setTimeout","count","setInterval","evt","onMouseup","setMouseup","on","eventOnOff","body","clearTimeout","clearInterval","buttons","incrementSvgAttrs","xmlns","width","height","fill","class","viewBox","d","decrementSvgAttrs","sharedButtonAttrs","tabindex","sharedSvgAttrs","scale","handler","incrementAttrs","labelIncrement","svg","path","slot","name","e","decrementAttrs","labelDecrement","top","bottom","_createElementBlock","ref","_normalizeClass","role","lang","_unref","title","ariaLabel","onClick","_renderSlot","_ctx","$slots","hasFocus","_createElementVNode","_mergeProps","onMousedown","_cache","args","onTouchstart","_openBlock","_normalizeProps","_guardReactiveProps","key","form","dir","state","required","_toDisplayString","placeholder"],"mappings":"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"}