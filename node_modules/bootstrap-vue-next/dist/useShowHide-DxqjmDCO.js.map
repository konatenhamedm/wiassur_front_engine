{"version":3,"file":"useShowHide-DxqjmDCO.js","sources":["../src/composables/useShowHide.ts"],"sourcesContent":["import {\n  type ComponentInternalInstance,\n  computed,\n  type EmitFn,\n  getCurrentInstance,\n  inject,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  onUnmounted,\n  readonly,\n  ref,\n  type Ref,\n  watch,\n} from 'vue'\nimport {showHideRegistryKey} from '../utils/keys'\nimport {BvTriggerableEvent} from '../utils'\nimport {useEventListener, useThrottleFn} from '@vueuse/core'\n\nexport const fadeBaseTransitionProps = {\n  name: 'fade',\n  enterActiveClass: '',\n  enterFromClass: 'showing',\n  enterToClass: '',\n  leaveActiveClass: '',\n  leaveFromClass: '',\n  leaveToClass: 'showing',\n  css: true,\n}\n\ninterface TransitionProps {\n  onBeforeEnter?: (el: Element) => void\n  onEnter?: (el: Element) => void\n  onAfterEnter?: (el: Element) => void\n  onBeforeLeave?: (el: Element) => void\n  onLeave?: (el: Element) => void\n  onAfterLeave?: (el: Element) => void\n  enterToClass?: string\n  leaveToClass?: string\n  enterFromClass?: string\n  leaveFromClass?: string\n  enterActiveClass?: string\n  leaveActiveClass?: string\n}\n\nexport const useShowHide = (\n  modelValue: Ref<boolean | number>,\n  props: {\n    visible?: boolean\n    show?: boolean\n    noAnimation?: boolean\n    noFade?: boolean\n    noCloseOnBackdrop?: boolean\n    noCloseOnEsc?: boolean\n    transitionProps?: TransitionProps\n    lazy?: boolean\n    initialAnimation?: boolean\n    delay?:\n      | number\n      | {\n          show: number\n          hide: number\n        }\n  } & Record<string, unknown>,\n  emit: EmitFn,\n  element: Ref<HTMLElement | null>,\n  computedId: Ref<string>,\n  options: {\n    transitionProps?: TransitionProps\n    showFn?: () => void\n    hideFn?: () => void\n  } = {\n    transitionProps: {},\n    showFn: () => {},\n    hideFn: () => {},\n  }\n) => {\n  let noAction = false\n  const initialShow = (!!modelValue.value && !props.initialAnimation) || props.visible || false\n  const showRef = ref<boolean>(initialShow)\n  const renderRef = ref<boolean>(initialShow)\n  const renderBackdropRef = ref<boolean>(initialShow)\n\n  let isCountdown = typeof modelValue.value !== 'boolean'\n\n  watch(modelValue, () => {\n    isCountdown = typeof modelValue.value !== 'boolean'\n    if (noAction) {\n      noAction = false\n      return\n    }\n    if (modelValue.value) {\n      show()\n    } else {\n      hide('modelValue', true)\n    }\n  })\n\n  const localNoAnimation = ref(initialShow)\n  const localTemporaryHide = ref(false)\n  const computedNoAnimation = computed(\n    () => props.noAnimation || props.noFade || localNoAnimation.value || false\n  )\n  let isMounted = false\n  onMounted(() => {\n    isMounted = true\n    if (!props.show && initialShow) {\n      // show without delay or animation\n      const event = buildTriggerableEvent('show', {cancelable: true})\n      emit('show', event)\n\n      if (event.defaultPrevented) {\n        emit('show-prevented', buildTriggerableEvent('show-prevented'))\n        return\n      }\n      localNoAnimation.value = true\n      if (!modelValue.value) {\n        noAction = true\n        modelValue.value = true\n      }\n      renderRef.value = true\n      renderBackdropRef.value = true\n      isVisible.value = true\n      backdropVisible.value = true\n      backdropReady.value = true\n      showRef.value = true\n      options.showFn?.()\n    } else if (props.show || (!!modelValue.value && props.initialAnimation)) {\n      show()\n    }\n  })\n\n  watch(\n    () => props.visible,\n    (newval) => {\n      localNoAnimation.value = true\n\n      nextTick(() => {\n        if (newval) isVisible.value = true\n        if (newval) {\n          show()\n        } else {\n          hide('visible-prop', true)\n        }\n      })\n    }\n  )\n  watch(\n    () => props.show,\n    (newval) => {\n      if (newval) {\n        show()\n      } else {\n        hide('show-prop', true)\n      }\n    }\n  )\n  // todo: remove\n  useEventListener(element, 'bv-toggle', () => {\n    modelValue.value = !modelValue.value\n  })\n\n  const buildTriggerableEvent = (\n    type: string,\n    opts: Readonly<Partial<BvTriggerableEvent>> = {}\n  ): BvTriggerableEvent =>\n    new BvTriggerableEvent(type, {\n      cancelable: false,\n      target: element?.value || null,\n      relatedTarget: null,\n      trigger: null,\n      ...opts,\n      componentId: computedId?.value,\n    })\n\n  let showTimeout: ReturnType<typeof setTimeout> | undefined\n  let hideTimeout: ReturnType<typeof setTimeout> | undefined\n  let _Resolve: ((value: boolean | string) => void) | undefined\n  let _Promise: Promise<boolean | string> | undefined\n  let _resolveOnHide: boolean | undefined\n  const show = (resolveOnHide: boolean = false): Promise<boolean | string> => {\n    if (showRef.value && !hideTimeout && !_Promise) return Promise.resolve(true)\n    _resolveOnHide = resolveOnHide\n    if (showRef.value && !hideTimeout && _Promise) return _Promise\n\n    _Promise = new Promise<boolean | string>((resolve) => {\n      _Resolve = resolve\n    })\n\n    const event = buildTriggerableEvent('show', {cancelable: true})\n    emit('show', event)\n\n    if (event.defaultPrevented) {\n      emit('show-prevented', buildTriggerableEvent('show-prevented'))\n      if (isVisible.value) {\n        isVisible.value = false\n      }\n      if (modelValue.value && !isCountdown) {\n        noAction = true\n        nextTick(() => {\n          modelValue.value = false\n        })\n      }\n      _Resolve?.('show-prevented')\n      return _Promise\n    }\n    if (hideTimeout) {\n      clearTimeout(hideTimeout)\n      hideTimeout = undefined\n    }\n    renderRef.value = true\n    renderBackdropRef.value = true\n    requestAnimationFrame(() => {\n      if (localNoAnimation.value || props.delay === undefined) {\n        if (!isMounted) return\n        showTimeout = undefined\n        showRef.value = true\n        options.showFn?.()\n        if (!modelValue.value) {\n          noAction = true\n          nextTick(() => {\n            modelValue.value = true\n          })\n        }\n        return\n      }\n      showTimeout = setTimeout(\n        () => {\n          if (!isMounted) return\n          showTimeout = undefined\n          showRef.value = true\n          options.showFn?.()\n          if (!modelValue.value) {\n            noAction = true\n            nextTick(() => {\n              modelValue.value = true\n            })\n          }\n        },\n        typeof props.delay === 'number' ? props.delay : props.delay?.show || 0\n      )\n    })\n    return _Promise\n  }\n\n  let leaveTrigger: string | undefined\n  const hide = (trigger?: string, noTriggerEmit?: boolean): Promise<string> => {\n    if (!showRef.value && !showTimeout) return Promise.resolve('')\n    if (!_Promise)\n      _Promise = new Promise<string>((resolve) => {\n        ;(_Resolve as (value: string | PromiseLike<string>) => void) = resolve\n      })\n    if (typeof trigger !== 'string') trigger = undefined\n    leaveTrigger = trigger\n    const event = buildTriggerableEvent('hide', {cancelable: true, trigger})\n    const event2 = buildTriggerableEvent(trigger || 'ignore', {cancelable: true, trigger})\n    if (\n      (trigger === 'backdrop' && props.noCloseOnBackdrop) ||\n      (trigger === 'esc' && props.noCloseOnEsc)\n    ) {\n      emit('hide-prevented', buildTriggerableEvent('hide-prevented', {trigger}))\n      _Resolve?.('hide-prevented')\n      return _Promise as Promise<string>\n    }\n    if (showTimeout) {\n      clearTimeout(showTimeout)\n      showTimeout = undefined\n    }\n    if (trigger && !noTriggerEmit) {\n      emit(trigger, event2)\n    }\n    emit('hide', event)\n\n    if (event.defaultPrevented || event2.defaultPrevented) {\n      emit('hide-prevented', buildTriggerableEvent('hide-prevented', {trigger}))\n      if (!modelValue.value) {\n        nextTick(() => {\n          noAction = true\n          modelValue.value = true\n        })\n      }\n      _Resolve?.('hide-prevented')\n      return _Promise as Promise<string>\n    }\n    trapActive.value = false\n    if (showTimeout) {\n      clearTimeout(showTimeout)\n      showTimeout = undefined\n      if (!localTemporaryHide.value) renderRef.value = false\n      renderBackdropRef.value = false\n    }\n    hideTimeout = setTimeout(\n      () => {\n        if (!isMounted) return\n        hideTimeout = undefined\n        isLeaving.value = true\n        showRef.value = false\n        options.hideFn?.()\n        if (modelValue.value) {\n          noAction = true\n          modelValue.value = isCountdown ? 0 : false\n        }\n      },\n      localNoAnimation.value\n        ? 0\n        : typeof props.delay === 'number'\n          ? props.delay\n          : props.delay?.hide || 0\n    )\n    return _Promise as Promise<string>\n  }\n  const throttleHide = useThrottleFn((a) => hide(a), 500)\n  const throttleShow = useThrottleFn(() => show(), 500)\n\n  const toggle = (resolveOnHide: boolean = false): Promise<boolean | string> => {\n    const e = buildTriggerableEvent('toggle', {cancelable: true})\n    emit('toggle', e)\n    if (e.defaultPrevented) {\n      emit('toggle-prevented', buildTriggerableEvent('toggle-prevented'))\n      return Promise.resolve('toggle-prevented')\n    }\n    if (showRef.value) {\n      return hide('toggle-function', true)\n    }\n    return show(resolveOnHide)\n  }\n  const triggerToggle = () => {\n    const e = buildTriggerableEvent('toggle', {cancelable: true})\n    emit('toggle', e)\n    if (e.defaultPrevented) {\n      emit('toggle-prevented', buildTriggerableEvent('toggle-prevented'))\n      return\n    }\n    if (showRef.value) {\n      hide('toggle-trigger', true)\n    } else {\n      show()\n    }\n  }\n  const triggerRegistry: {trigger: string; el: Element}[] = []\n  const registerTrigger = (trigger: string, el: Element) => {\n    triggerRegistry.push({trigger, el})\n    el.addEventListener(trigger, triggerToggle)\n    checkVisibility(el)\n  }\n  const unregisterTrigger = (trigger: string, el: Element, clean = true) => {\n    const idx = triggerRegistry.findIndex((t) => t?.trigger === trigger && t.el === el)\n    if (idx > -1) {\n      triggerRegistry.splice(idx, 1)\n      el.removeEventListener(trigger, triggerToggle)\n      if (clean) {\n        el.removeAttribute('aria-expanded')\n        el.classList.remove('collapsed')\n        el.classList.remove('not-collapsed')\n      }\n    }\n  }\n\n  const appRegistry = inject(showHideRegistryKey, undefined)?.register({\n    id: computedId.value,\n    toggle,\n    show,\n    hide,\n    value: readonly(showRef),\n    registerTrigger,\n    unregisterTrigger,\n    component: getCurrentInstance() as ComponentInternalInstance,\n  })\n  const checkVisibility = (el: Element) => {\n    el.setAttribute('aria-expanded', modelValue.value ? 'true' : 'false')\n    el.classList.toggle('collapsed', !modelValue.value)\n    el.classList.toggle('not-collapsed', !!modelValue.value)\n  }\n\n  watch(modelValue, () => {\n    triggerRegistry.forEach((t) => {\n      checkVisibility(t.el)\n    })\n  })\n\n  watch(computedId, (newId, oldId) => {\n    appRegistry?.updateId(newId, oldId)\n  })\n\n  onBeforeUnmount(() => {\n    appRegistry?.unregister()\n    triggerRegistry.forEach((t) => {\n      t.el.removeEventListener(t.trigger, triggerToggle)\n    })\n  })\n  onUnmounted(() => {\n    isMounted = false\n    clearTimeout(showTimeout)\n    clearTimeout(hideTimeout)\n    showTimeout = undefined\n    hideTimeout = undefined\n  })\n\n  const lazyLoadCompleted = ref(false)\n  const markLazyLoadCompleted = () => {\n    if (props.lazy === true) lazyLoadCompleted.value = true\n  }\n\n  const isLeaving = ref(false)\n  const isActive = ref(initialShow)\n  const isVisible = ref(initialShow)\n\n  const onBeforeEnter = (el: Element) => {\n    options.transitionProps?.onBeforeEnter?.(el)\n    props.transitionProps?.onBeforeEnter?.(el)\n    isActive.value = true\n  }\n  const onEnter = (el: Element) => {\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        // sometimes one just isn't enough (offcanvas on the first load after refresh)\n        isVisible.value = true\n      })\n    })\n    options.transitionProps?.onEnter?.(el)\n    props.transitionProps?.onEnter?.(el)\n  }\n  const onAfterEnter = (el: Element) => {\n    markLazyLoadCompleted()\n    options.transitionProps?.onAfterEnter?.(el)\n    props.transitionProps?.onAfterEnter?.(el)\n    if (localNoAnimation.value) {\n      requestAnimationFrame(() => {\n        localNoAnimation.value = false\n      })\n    }\n    if (localTemporaryHide.value) {\n      localTemporaryHide.value = false\n    }\n    requestAnimationFrame(() => {\n      trapActive.value = true\n      nextTick(() => {\n        emit('shown', buildTriggerableEvent('shown', {cancelable: false}))\n      })\n    })\n    if (!_resolveOnHide) {\n      _Resolve?.(true)\n      _Promise = undefined\n      _Resolve = undefined\n    }\n  }\n  const onBeforeLeave = (el: Element) => {\n    if (!isLeaving.value) isLeaving.value = true\n    options.transitionProps?.onBeforeLeave?.(el)\n    props.transitionProps?.onBeforeLeave?.(el)\n    trapActive.value = false\n  }\n  const onLeave = (el: Element) => {\n    isVisible.value = false\n    options.transitionProps?.onLeave?.(el)\n    props.transitionProps?.onLeave?.(el)\n  }\n  const onAfterLeave = (el: Element) => {\n    emit('hidden', buildTriggerableEvent('hidden', {trigger: leaveTrigger, cancelable: false}))\n    options.transitionProps?.onAfterLeave?.(el)\n    props.transitionProps?.onAfterLeave?.(el)\n    isLeaving.value = false\n    isActive.value = false\n    if (localNoAnimation.value) {\n      requestAnimationFrame(() => {\n        localNoAnimation.value = false\n      })\n    }\n    requestAnimationFrame(() => {\n      if (!localTemporaryHide.value) renderRef.value = false\n    })\n    _Resolve?.(leaveTrigger || '')\n    _Promise = undefined\n    _Resolve = undefined\n    leaveTrigger = undefined\n  }\n\n  const contentShowing = computed(\n    () =>\n      localTemporaryHide.value === true ||\n      isActive.value === true ||\n      props.lazy === false ||\n      (props.lazy === true && lazyLoadCompleted.value === true && props.unmountLazy === false)\n  )\n  const trapActive = ref(false)\n  const backdropVisible = ref(false)\n  const backdropReady = ref(false)\n\n  const transitionFunctions = {\n    ...options.transitionProps,\n    onBeforeEnter,\n    onEnter,\n    onAfterEnter,\n    onBeforeLeave,\n    onLeave,\n    onAfterLeave,\n  }\n  return {\n    showRef,\n    renderRef,\n    renderBackdropRef,\n    isVisible,\n    isActive,\n    trapActive,\n    show,\n    hide,\n    toggle,\n    throttleHide,\n    throttleShow,\n    buildTriggerableEvent,\n    computedNoAnimation,\n    localNoAnimation,\n    localTemporaryHide,\n    isLeaving,\n    transitionProps: {\n      ...fadeBaseTransitionProps,\n      ...props.transitionProps,\n      ...transitionFunctions,\n    },\n\n    lazyLoadCompleted,\n    markLazyLoadCompleted,\n    contentShowing,\n    backdropReady,\n    backdropVisible,\n    backdropTransitionProps: {\n      ...fadeBaseTransitionProps,\n      onBeforeEnter: () => {\n        requestAnimationFrame(() => {\n          requestAnimationFrame(() => {\n            backdropVisible.value = true\n          })\n        })\n        backdropReady.value = false\n      },\n      onAfterEnter: () => {\n        backdropReady.value = true\n      },\n      onBeforeLeave: () => {\n        backdropVisible.value = false\n      },\n      onAfterLeave: () => {\n        backdropReady.value = false\n        requestAnimationFrame(() => {\n          renderBackdropRef.value = false\n        })\n      },\n    },\n  }\n}\n"],"names":["fadeBaseTransitionProps","name","enterActiveClass","enterFromClass","enterToClass","leaveActiveClass","leaveFromClass","leaveToClass","css","modelValue","props","emit","element","computedId","options","transitionProps","showFn","hideFn","noAction","initialShow","value","initialAnimation","visible","showRef","ref","renderRef","renderBackdropRef","isCountdown","watch","show","hide","localNoAnimation","localTemporaryHide","computedNoAnimation","computed","noAnimation","noFade","isMounted","onMounted","event","buildTriggerableEvent","cancelable","defaultPrevented","isVisible","backdropVisible","backdropReady","newval","nextTick","useEventListener","type","opts","BvTriggerableEvent","target","relatedTarget","trigger","componentId","showTimeout","hideTimeout","_Resolve","_Promise","_resolveOnHide","resolveOnHide","Promise","resolve","clearTimeout","requestAnimationFrame","delay","setTimeout","leaveTrigger","noTriggerEmit","event2","noCloseOnBackdrop","noCloseOnEsc","trapActive","isLeaving","throttleHide","useThrottleFn","a","throttleShow","toggle","e","triggerToggle","triggerRegistry","appRegistry","inject","showHideRegistryKey","register","id","readonly","registerTrigger","el","push","addEventListener","checkVisibility","unregisterTrigger","clean","idx","findIndex","t","splice","removeEventListener","removeAttribute","classList","remove","component","getCurrentInstance","setAttribute","forEach","newId","oldId","updateId","onBeforeUnmount","unregister","onUnmounted","lazyLoadCompleted","markLazyLoadCompleted","lazy","isActive","contentShowing","unmountLazy","transitionFunctions","onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave","backdropTransitionProps"],"mappings":"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"}