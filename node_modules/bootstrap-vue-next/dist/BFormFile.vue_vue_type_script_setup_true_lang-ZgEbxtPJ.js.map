{"version":3,"file":"BFormFile.vue_vue_type_script_setup_true_lang-ZgEbxtPJ.js","sources":["../src/components/BFormFile/BFormFile.vue"],"sourcesContent":["<template>\n  <label\n    v-if=\"hasLabelSlot || props.label\"\n    class=\"form-label\"\n    :class=\"props.labelClass\"\n    :for=\"computedId\"\n  >\n    <slot name=\"label\">\n      {{ props.label }}\n    </slot>\n  </label>\n\n  <input\n    :id=\"computedId\"\n    v-bind=\"$attrs\"\n    ref=\"_input\"\n    type=\"file\"\n    :class=\"computedClasses\"\n    :form=\"props.form\"\n    :name=\"props.name\"\n    :multiple=\"props.multiple\"\n    :disabled=\"props.disabled\"\n    :capture=\"props.capture\"\n    :accept=\"computedAccept || undefined\"\n    :required=\"props.required || undefined\"\n    :aria-label=\"props.ariaLabel\"\n    :aria-labelledby=\"props.ariaLabelledby\"\n    :aria-required=\"props.required || undefined\"\n    :directory=\"props.directory\"\n    :webkitdirectory=\"props.directory\"\n    @change=\"onChange\"\n    @drop=\"onDrop\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport {useFocus} from '@vueuse/core'\nimport {computed, useTemplateRef, watch} from 'vue'\nimport type {BFormFileProps} from '../../types/ComponentProps'\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useId} from '../../composables/useId'\nimport {useStateClass} from '../../composables/useStateClass'\nimport {isEmptySlot} from '../../utils/dom'\nimport type {BFormFileSlots} from '../../types'\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst _props = withDefaults(defineProps<Omit<BFormFileProps, 'modelValue'>>(), {\n  ariaLabel: undefined,\n  ariaLabelledby: undefined,\n  accept: '',\n  autofocus: false,\n  capture: undefined,\n  directory: false,\n  disabled: false,\n  form: undefined,\n  id: undefined,\n  label: '',\n  labelClass: undefined,\n  multiple: false,\n  name: undefined,\n  noButton: false,\n  noDrop: false,\n  noTraverse: false,\n  plain: false,\n  required: false,\n  size: undefined,\n  state: null,\n})\nconst props = useDefaults(_props, 'BFormFile')\nconst slots = defineSlots<BFormFileSlots>()\n\nconst modelValue = defineModel<Exclude<BFormFileProps['modelValue'], undefined>>({\n  default: null,\n})\n\nconst computedId = useId(() => props.id)\n\n// TODO noTraverse is not implemented yet\n\nconst stateClass = useStateClass(() => props.state)\n\nconst input = useTemplateRef('_input')\n\nconst {focused} = useFocus(input, {initialValue: props.autofocus})\n\nconst hasLabelSlot = computed(() => !isEmptySlot(slots['label']))\n\nconst computedAccept = computed(() =>\n  typeof props.accept === 'string' ? props.accept : props.accept.join(',')\n)\n\nconst computedClasses = computed(() => [\n  stateClass.value,\n  {\n    [`form-control-${props.size}`]: props.size !== undefined,\n    'form-control': !props.plain,\n    'form-control-input-file-hide-button': props.noButton,\n  },\n])\n\nconst onChange = () => {\n  const value =\n    input.value?.files === null || input.value?.files === undefined ? null : [...input.value.files]\n  modelValue.value = value === null ? null : props.multiple === true ? value : value[0]\n}\n\nconst onDrop = (e: Readonly<Event>) => {\n  if (props.noDrop === true) {\n    e.preventDefault()\n  }\n}\n\n/**\n * Reset the form input\n */\nconst reset = () => {\n  modelValue.value = null\n}\n\nwatch(modelValue, (newValue) => {\n  if (newValue === null && input.value !== null) {\n    input.value.value = ''\n  }\n})\n\ndefineExpose({\n  blur: () => {\n    focused.value = false\n  },\n  element: input,\n  focus: () => {\n    focused.value = true\n  },\n  reset,\n})\n</script>\n"],"names":["_props","__props","props","useDefaults","slots","_useSlots","modelValue","_useModel","computedId","useId","id","stateClass","useStateClass","state","input","useTemplateRef","focused","useFocus","initialValue","autofocus","hasLabelSlot","computed","isEmptySlot","computedAccept","accept","join","computedClasses","value","size","plain","noButton","onChange","files","multiple","onDrop","e","noDrop","preventDefault","watch","newValue","__expose","blur","element","focus","reset","_unref","label","_createElementBlock","class","_normalizeClass","labelClass","for","_renderSlot","_ctx","_createTextVNode","_toDisplayString","_createElementVNode","_mergeProps","$attrs","ref","type","form","name","disabled","capture","required","ariaLabel","ariaLabelledby","directory","webkitdirectory"],"mappings":"0oCAiDA,MAAMA,EAASC,EAsBTC,EAAQC,EAAAA,YAAYH,EAAQ,aAC5BI,EAAQC,EAAAA,WAERC,EAAaC,EAAAA,SAA6DN,EAAA,cAI1EO,EAAaC,EAAAA,MAAM,IAAMP,EAAMQ,IAI/BC,EAAaC,EAAAA,cAAc,IAAMV,EAAMW,OAEvCC,EAAQC,EAAAA,eAAe,WAEvBC,QAACA,GAAWC,WAASH,EAAO,CAACI,aAAchB,EAAMiB,YAEjDC,EAAeC,EAAAA,SAAS,KAAOC,EAAAA,YAAYlB,EAAa,QAExDmB,EAAiBF,EAAAA,SAAS,IACN,iBAAjBnB,EAAMsB,OAAsBtB,EAAMsB,OAAStB,EAAMsB,OAAOC,KAAK,MAGhEC,EAAkBL,EAAAA,SAAS,IAAM,CACrCV,EAAWgB,MACX,CACE,CAAC,gBAAgBzB,EAAM0B,aAAwB,IAAf1B,EAAM0B,KACtC,gBAAiB1B,EAAM2B,MACvB,sCAAuC3B,EAAM4B,YAI3CC,EAAW,KACf,MAAMJ,EACmB,OAAvBb,EAAMa,OAAOK,YAAyC,IAAvBlB,EAAMa,OAAOK,MAAsB,KAAO,IAAIlB,EAAMa,MAAMK,OAC3F1B,EAAWqB,MAAkB,OAAVA,EAAiB,MAA0B,IAAnBzB,EAAM+B,SAAoBN,EAAQA,EAAM,IAG/EO,EAAUC,KACO,IAAjBjC,EAAMkC,QACRD,EAAEE,yBAWNC,QAAMhC,EAAaiC,IACA,OAAbA,GAAqC,OAAhBzB,EAAMa,QAC7Bb,EAAMa,MAAMA,MAAQ,MAIxBa,EAAa,CACXC,KAAM,KACJzB,EAAQW,OAAQ,GAElBe,QAAS5B,EACT6B,MAAO,KACL3B,EAAQW,OAAQ,GAElBiB,MAlBY,KACZtC,EAAWqB,MAAQ,oEArHXP,EAAAO,OAAgBkB,EAAAA,MAAA3C,GAAM4C,qBAD9BC,EAAAA,mBASQ,QAAA,OAPNC,MAAKC,EAAAA,eAAA,CAAC,aACEJ,EAAAA,MAAA3C,GAAMgD,aACbC,IAAKN,EAAAA,MAAArC,KAEN4C,EAAAA,WAEOC,oBAFP,IAEO,CADFC,EAAAA,gBAAAC,EAAAA,gBAAAV,EAAAA,MAAA3C,GAAM4C,OAAK,yCAIlBU,qBAoBE,QApBFC,EAAAA,WAoBE,CAnBC/C,GAAImC,EAAAA,MAAArC,IACGkD,EAAAA,OAAM,CACdC,IAAI,SACJC,KAAK,OACJZ,MAAOtB,EAAAC,MACPkC,KAAMhB,EAAAA,MAAA3C,GAAM2D,KACZC,KAAMjB,EAAAA,MAAA3C,GAAM4D,KACZ7B,SAAUY,EAAAA,MAAA3C,GAAM+B,SAChB8B,SAAUlB,EAAAA,MAAA3C,GAAM6D,SAChBC,QAASnB,EAAAA,MAAA3C,GAAM8D,QACfxC,OAAQD,EAAAI,YAAkB,EAC1BsC,SAAUpB,EAAAA,MAAA3C,GAAM+D,eAAY,EAC5B,aAAYpB,EAAAA,MAAA3C,GAAMgE,UAClB,kBAAiBrB,EAAAA,MAAA3C,GAAMiE,eACvB,gBAAetB,EAAAA,MAAA3C,GAAM+D,eAAY,EACjCG,UAAWvB,EAAAA,MAAA3C,GAAMkE,UACjBC,gBAAiBxB,EAAAA,MAAA3C,GAAMkE,UACvBrC,WACAG"}