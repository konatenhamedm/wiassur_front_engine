"use strict";const e=require("vue"),t=require("./object-BvjuW1R8.js"),o=require("./BTableSimple.vue_vue_type_script_setup_true_lang-B_XLxNu4.js"),l=require("./useDefaults-DspAih6L.js"),a=require("./tableUtils-BGOX5AJ8.js"),r=require("./stringUtils-Bz1j95i5.js"),n=require("./useId-owZCNodL.js"),s=require("./constants-B1zBgSOo.js"),i=require("./event-UQ02889E.js"),d=require("./keys-D59bcWpQ.js"),u=require("./index-CDlPJrTO.js"),c=(e,o,l)=>{const a=t.get(e,o);return l&&"function"==typeof l?l(a,o,e):a},f=e=>"object"==typeof e&&null!==e,p=e=>"object"==typeof e&&null!==e&&"key"in e,v=e.defineComponent({__name:"BTbody",props:{variant:{default:null}},setup(t){const o=t,a=l.useDefaults(o,"BTbody"),r=e.computed(()=>({[`thead-${a.variant}`]:null!==a.variant}));return(t,o)=>(e.openBlock(),e.createElementBlock("tbody",{class:e.normalizeClass(r.value)},[e.renderSlot(t.$slots,"default")],2))}}),m=["colspan","rowspan","data-label"],y={key:0},b=e.defineComponent({__name:"BTd",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null}},setup(t){const o=t,a=l.useDefaults(o,"BTd"),r=e.computed(()=>({[`table-${a.variant}`]:null!==a.variant,"b-table-sticky-column":a.stickyColumn,"table-b-table-default":a.stickyColumn&&null===a.variant}));return(t,o)=>(e.openBlock(),e.createElementBlock("td",{class:e.normalizeClass(r.value),colspan:e.unref(a).colspan,rowspan:e.unref(a).rowspan,"data-label":e.unref(a).stackedHeading},[e.unref(a).stackedHeading?(e.openBlock(),e.createElementBlock("div",y,[e.renderSlot(t.$slots,"default")])):e.renderSlot(t.$slots,"default",{key:1})],10,m))}}),k=e.defineComponent({__name:"BTfoot",props:{variant:{default:null}},setup(t){const o=t,a=l.useDefaults(o,"BTfoot"),r=e.computed(()=>({[`table-${a.variant}`]:null!==a.variant}));return(t,o)=>(e.openBlock(),e.createElementBlock("tfoot",{class:e.normalizeClass(r.value)},[e.renderSlot(t.$slots,"default")],2))}}),g=["scope","colspan","rowspan","data-label"],w={key:0},h=e.defineComponent({__name:"BTh",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null},scope:{default:void 0}},setup(t){const o=t,a=l.useDefaults(o,"BTh"),r=e.computed(()=>({[`table-${a.variant}`]:null!==a.variant,"b-table-sticky-column":a.stickyColumn,"table-b-table-default":a.stickyColumn&&null===a.variant})),n=e.computed(()=>a.scope?a.scope:a.colspan?"colgroup":a.rowspan?"rowgroup":"col");return(t,o)=>(e.openBlock(),e.createElementBlock("th",{scope:n.value,class:e.normalizeClass(r.value),colspan:e.unref(a).colspan,rowspan:e.unref(a).rowspan,"data-label":e.unref(a).stackedHeading},[void 0!==e.unref(a).stackedHeading?(e.openBlock(),e.createElementBlock("div",w,[e.renderSlot(t.$slots,"default")])):e.renderSlot(t.$slots,"default",{key:1})],10,g))}}),C=e.defineComponent({__name:"BThead",props:{variant:{default:null}},setup(t){const o=t,a=l.useDefaults(o,"BThead"),r=e.computed(()=>({[`table-${a.variant}`]:null!==a.variant}));return(t,o)=>(e.openBlock(),e.createElementBlock("thead",{class:e.normalizeClass(r.value)},[e.renderSlot(t.$slots,"default")],2))}}),S=e.defineComponent({__name:"BTr",props:{variant:{default:null}},setup(t){const o=t,a=l.useDefaults(o,"BTr"),r=e.computed(()=>({[`table-${a.variant}`]:null!==a.variant}));return(t,o)=>(e.openBlock(),e.createElementBlock("tr",{class:e.normalizeClass(r.value)},[e.renderSlot(t.$slots,"default")],2))}}),B=["TD","TH","TR"],x=["a","a *","button","button *","input:not(.disabled):not([disabled])","select:not(.disabled):not([disabled])","textarea:not(.disabled):not([disabled])",'[role="link"]','[role="link"] *','[role="button"]','[role="button"] *',"[tabindex]:not(.disabled):not([disabled])"].join(","),_=e=>{if(!e||!e.target)return!1;const t=e.target;if("disabled"in t&&t.disabled||-1!==B.indexOf(t.tagName))return!1;if(t.closest(".dropdown-menu"))return!0;const o="LABEL"===t.tagName?t:t.closest("label");if(o){const e=o.getAttribute("for"),t=e?document.getElementById(e):o.querySelector("input, select, textarea");if(t&&!t.disabled)return!0}return t.matches(x)},T={key:0},$={key:0,class:"b-table-stacked-label"},P={class:"d-inline-flex flex-nowrap align-items-center gap-1"},N={key:3},V=e.defineComponent({__name:"BTableLite",props:{align:{default:void 0},caption:{default:void 0},detailsTdClass:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:!1},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:!1},modelValue:{default:void 0},primaryKey:{default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{type:[Function,Object],default:void 0},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{},tableClass:{default:void 0}},emits:["head-clicked","row-clicked","row-dblclicked","row-contextmenu","row-hovered","row-unhovered","row-middle-clicked"],setup(u,{emit:m}){const y=u,g=l.useDefaults(y,"BTableLite"),w=m,B=e.useSlots(),x=e.inject(d.tableKeyboardNavigationKey,null),V=n.useId(()=>g.id),D=e.ref(new WeakMap);e.watch(()=>g.items,e=>{e.forEach(e=>{f(e)&&D.value.set(...(e=>[e,e._showDetails])(e))})},{deep:!0,immediate:!0});const E=e.computed(()=>[g.tableClass,{[`align-${g.align}`]:void 0!==g.align}]),A=e.computed(()=>{if(!g.fields.length&&g.items.length){const[e]=g.items;return e&&(f(e)||Array.isArray(e))?Object.keys(e).map(e=>{const t=r.startCase(e);return{key:e,label:t,tdAttr:a.getDataLabelAttr(g,t)}}):[{key:"",_noHeader:!0}]}return g.fields.map(e=>{if(p(e)){const t=e.label??r.startCase(e.key);return{...e,tdAttr:{...a.getDataLabelAttr(g,t),...e.tdAttr}}}const t=r.startCase(e);return{key:e,label:t,tdAttr:a.getDataLabelAttr(g,t)}})}),F=e.computed(()=>A.value.length),R=e.computed(()=>!(F.value>0&&A.value.every(e=>!0===e._noHeader))),I=e.computed(()=>({variant:g.footVariant??g.headVariant,class:g.tfootClass??g.theadClass})),j=(e,o,l)=>{const a=String(o.key),r=t.get(e,a);return o.thAttr&&"function"==typeof o.thAttr?o.thAttr(r,a,e,l):o.thAttr},M=(e,t,o=!1)=>{w("head-clicked",e.key,e,t,o)},O=e=>{if(f(e)){const t=D.value.get(e);D.value.set(e,!t),e._showDetails=!t}},L=e=>[e.class,e.thClass,{"b-table-sticky-column":e.stickyColumn},g.fieldColumnClass?"function"==typeof g.fieldColumnClass?g.fieldColumnClass(e):g.fieldColumnClass:null],z=(e,o)=>{const l=t.get(o,String(e.key));return[e.class,"function"==typeof e.tdClass?e.tdClass(l,String(e.key),o):e.tdClass,f(o)&&o._cellVariants?.[e.key]?`table-${o._cellVariants?.[e.key]}`:null,{"b-table-sticky-column":e.stickyColumn}]},K=(e,t)=>g.tbodyTrAttrs?"function"==typeof g.tbodyTrAttrs?g.tbodyTrAttrs(e,t):g.tbodyTrAttrs:null,H=(e,t)=>g.tbodyTrClass?"function"==typeof g.tbodyTrClass?g.tbodyTrClass(e,t):g.tbodyTrClass:null,q=e=>!(!x?.headerNavigation.value||!0!==e.sortable),U=e.computed(()=>!!(x?.rowNavigation.value&&g.items.length>0)),W=(e,t,o=!1)=>{const{target:l,code:a}=t;l&&"TH"!==l.tagName&&document.activeElement===l||"Enter"!==a&&"Space"!==a||(i.stopEvent(t),M(e,t,o))},Y=(e,t,o)=>{const l=Array.from(document.querySelectorAll(`#${V.value} tbody tr[tabindex]`));if(0===l.length)return;let a=o;e===s.CODE_DOWN?a=t?l.length-1:Math.min(o+1,l.length-1):e===s.CODE_UP?a=t?0:Math.max(o-1,0):e===s.CODE_END?a=l.length-1:e===s.CODE_HOME&&(a=0),a!==o&&l[a]&&l[a].focus()},J=e.computed(()=>({...t.pick(g,a.btableSimpleProps),tableClass:E.value,id:V.value}));return(l,r)=>(e.openBlock(),e.createBlock(o._sfc_main,e.normalizeProps(e.guardReactiveProps(J.value)),{default:e.withCtx(()=>[B["table-colgroup"]?(e.openBlock(),e.createElementBlock("colgroup",T,[e.renderSlot(l.$slots,"table-colgroup",{fields:A.value})])):e.createCommentVNode("",!0),e.withDirectives(e.createVNode(C,{variant:e.unref(g).headVariant,class:e.normalizeClass(e.unref(g).theadClass)},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"thead-top",{columns:F.value,fields:A.value}),e.createVNode(S,{variant:e.unref(g).headRowVariant,class:e.normalizeClass(e.unref(g).theadTrClass)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value,t=>(e.openBlock(),e.createBlock(h,e.mergeProps({key:t.key,scope:t.scope,class:L(t),title:t.headerTitle,variant:t.variant,abbr:t.headerAbbr,style:t.thStyle,tabindex:q(t)?"0":void 0},{ref_for:!0},j(null,t,"top"),{onClick:e=>M(t,e),onKeydown:e=>W(t,e)}),{default:e.withCtx(()=>[e.renderSlot(l.$slots,B[`head(${String(t.key)})`]?`head(${String(t.key)})`:"head()",{label:t.label,column:t.key,field:t,isFoot:!1},()=>[e.createTextVNode(e.toDisplayString(e.unref(a.getTableFieldHeadLabel)(t)),1)])]),_:2},1040,["scope","class","title","variant","abbr","style","tabindex","onClick","onKeydown"]))),128))]),_:3},8,["variant","class"]),B["thead-sub"]?(e.openBlock(),e.createBlock(S,{key:0},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value,t=>(e.openBlock(),e.createBlock(b,{key:t.key,scope:"col",variant:t.variant,class:e.normalizeClass([t.class,t.thClass])},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"thead-sub",{items:e.unref(g).items,fields:A.value,field:t},()=>[e.createTextVNode(e.toDisplayString(t.label),1)])]),_:2},1032,["variant","class"]))),128))]),_:3})):e.createCommentVNode("",!0)]),_:3},8,["variant","class"]),[[e.vShow,R.value]]),e.createVNode(v,{class:e.normalizeClass(e.unref(g).tbodyClass)},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"custom-body",{fields:A.value,items:e.unref(g).items,columns:F.value},()=>[!e.unref(g).stacked&&B["top-row"]?(e.openBlock(),e.createBlock(S,e.mergeProps({key:0,class:H(null,"row-top")},K(null,"row-top")),{default:e.withCtx(()=>[e.renderSlot(l.$slots,"top-row",{columns:F.value,fields:A.value})]),_:3},16,["class"])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(g).items,(o,r)=>{return e.openBlock(),e.createElementBlock(e.Fragment,{key:e.unref(g).primaryKey&&e.unref(t.get)(o,e.unref(g).primaryKey)?e.unref(t.get)(o,e.unref(g).primaryKey):r},[e.createVNode(S,e.mergeProps({id:e.unref(g).primaryKey&&e.unref(t.get)(o,e.unref(g).primaryKey)?(n=e.unref(t.get)(o,e.unref(g).primaryKey),`${V.value}__row_${n}`):void 0,class:H(o,"row"),variant:e.unref(f)(o)?o._rowVariant:void 0,tabindex:U.value?"0":void 0},{ref_for:!0},K(o,"row"),{onClick:t=>!e.unref(_)(t)&&w("row-clicked",o,r,t),onDblclick:t=>!e.unref(_)(t)&&w("row-dblclicked",o,r,t),onContextmenu:t=>!e.unref(_)(t)&&w("row-contextmenu",o,r,t),onMouseenter:t=>!e.unref(_)(t)&&w("row-hovered",o,r,t),onMouseleave:t=>!e.unref(_)(t)&&w("row-unhovered",o,r,t),onMousedown:e=>((e,t,o)=>{1!==o.button||_(o)||w("row-middle-clicked",e,t,o)})(o,r,e),onKeydown:e=>((e,t,o)=>{const{target:l,code:a,shiftKey:r}=o;if(!l||"TR"===l.tagName||document.activeElement!==l)return"Enter"===a||"Space"===a?(i.stopEvent(o),void w("row-clicked",e,t,o)):void(a!==s.CODE_DOWN&&a!==s.CODE_UP&&a!==s.CODE_HOME&&a!==s.CODE_END||(i.stopEvent(o),Y(a,r,t)))})(o,r,e)}),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value,n=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent((e=>e?.isRowHeader?h:b)(n)),e.mergeProps({key:n.key,variant:e.unref(f)(o)&&o._cellVariants?.[n.key]?null:n.variant,class:z(n,o)},{ref_for:!0},((e,o,l)=>{const a=t.get(e,o);return l&&"function"==typeof l?l(a,o,e):l})(o,String(n.key),n.tdAttr)),{default:e.withCtx(()=>[e.unref(g).stacked&&e.unref(g).labelStacked?(e.openBlock(),e.createElementBlock("label",$,e.toDisplayString(e.unref(a.getTableFieldHeadLabel)(n)),1)):e.createCommentVNode("",!0),e.renderSlot(l.$slots,B[`cell(${String(n.key)})`]?`cell(${String(n.key)})`:"cell()",{value:e.unref(c)(o,String(n.key),n.formatter),unformatted:e.unref(t.get)(o,String(n.key)),index:r,item:o,field:n,items:l.items,toggleDetails:()=>O(o),detailsShowing:!!e.unref(f)(o)&&(D.value.get(o)??!1)},()=>[B[`cell(${String(n.key)})`]||B["cell()"]?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(e.unref(c)(o,String(n.key),n.formatter)),1)],64))])]),_:2},1040,["variant","class"]))),128))]),_:2},1040,["id","class","variant","tabindex","onClick","onDblclick","onContextmenu","onMouseenter","onMouseleave","onMousedown","onKeydown"]),e.unref(f)(o)&&!0===D.value.get(o)&&B["row-details"]?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(S,{"aria-hidden":"true",role:"presentation",class:"d-none"}),e.createVNode(S,e.mergeProps({class:H(o,"row-details"),variant:o._rowVariant},{ref_for:!0},K(o,"row-details")),{default:e.withCtx(()=>[e.createVNode(b,{colspan:F.value,class:e.normalizeClass(l.detailsTdClass)},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"row-details",{item:o,toggleDetails:()=>O(o),fields:A.value,index:r})]),_:2},1032,["colspan","class"])]),_:2},1040,["class","variant"])],64)):e.createCommentVNode("",!0)],64);var n}),128)),!e.unref(g).stacked&&B["bottom-row"]?(e.openBlock(),e.createBlock(S,e.mergeProps({key:1,class:["bottom-row",H(null,"row-bottom")]},K(null,"row-bottom")),{default:e.withCtx(()=>[e.renderSlot(l.$slots,"bottom-row",{columns:F.value,fields:A.value})]),_:3},16,["class"])):e.createCommentVNode("",!0)])]),_:3},8,["class"]),e.unref(g).footClone?(e.openBlock(),e.createBlock(k,e.normalizeProps(e.mergeProps({key:1},I.value)),{default:e.withCtx(()=>[e.createVNode(S,{variant:e.unref(g).footRowVariant??e.unref(g).headRowVariant,class:e.normalizeClass(e.unref(g).tfootTrClass??e.unref(g).theadTrClass)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value,t=>(e.openBlock(),e.createBlock(h,e.mergeProps({key:t.key,scope:"col",class:L(t),title:t.headerTitle,abbr:t.headerAbbr,style:t.thStyle,variant:t.variant,tabindex:q(t)?"0":void 0},{ref_for:!0},j(null,t,"bottom"),{onClick:e=>M(t,e,!0),onKeydown:e=>W(t,e,!0)}),{default:e.withCtx(()=>{return[e.createElementVNode("div",P,[e.createElementVNode("div",null,[e.renderSlot(l.$slots,(o=t.key,B[`foot(${String(o)})`]?`foot(${String(o)})`:B["foot()"]?"foot()":B[`head(${String(o)})`]?`head(${String(o)})`:"head()"),{label:t.label,column:t.key,field:t,isFoot:!0},()=>[e.createTextVNode(e.toDisplayString(e.unref(a.getTableFieldHeadLabel)(t)),1)])])])];var o}),_:2},1040,["class","title","abbr","style","variant","tabindex","onClick","onKeydown"]))),128))]),_:3},8,["variant","class"])]),_:3},16)):B["custom-foot"]?(e.openBlock(),e.createBlock(k,e.normalizeProps(e.mergeProps({key:2},I.value)),{default:e.withCtx(()=>[e.renderSlot(l.$slots,"custom-foot",{fields:A.value,items:e.unref(g).items,columns:F.value})]),_:3},16)):e.createCommentVNode("",!0),B["table-caption"]||e.unref(g).caption?(e.openBlock(),e.createElementBlock("caption",N,[e.renderSlot(l.$slots,"table-caption",{},()=>[e.createTextVNode(e.toDisplayString(e.unref(g).caption),1)])])):e.createCommentVNode("",!0)]),_:3},16))}}),D=["d"],E=e.defineComponent({__name:"SortIcon",props:{fieldInfo:{},sortBy:{},initialSortDirection:{}},setup(t){const o=t,l=e.computed(()=>o.sortBy?.find(e=>e.key===o.fieldInfo.key)),a=e.computed(()=>{if(l.value?.order)return l.value.order;const e=o.fieldInfo.initialSortDirection||o.initialSortDirection;if("last"===e){const e=[...o.sortBy??[]].reverse().find(e=>void 0!==e.order);return e?.order||"asc"}return"desc"===e?"desc":"asc"}),r=e.computed(()=>"desc"===a.value?"M8 4a.5.5 0 0 1 .5.5v5.793l2.146-2.147a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 1 1 .708-.708L7.5 10.293V4.5A.5.5 0 0 1 8 4z":"M8 12a.5.5 0 0 0 .5-.5V5.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 5.707V11.5a.5.5 0 0 0 .5.5z"),n=e.computed(()=>"desc"===a.value?"bi bi-arrow-down-short":"bi bi-arrow-up-short"),s=e.computed(()=>l.value?.order?1:.4);return(t,o)=>(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",class:e.normalizeClass(n.value),style:e.normalizeStyle({opacity:s.value}),viewBox:"0 0 16 16","aria-hidden":"true"},[e.createElementVNode("path",{"fill-rule":"evenodd",d:r.value},null,8,D)],6))}}),A={role:"alert","aria-live":"polite"},F={class:"text-center my-2"},R=e.defineComponent({__name:"BTable",props:e.mergeModels({provider:{type:Function,default:void 0},noProvider:{default:void 0},noProviderPaging:{type:Boolean,default:!1},noProviderSorting:{type:Boolean,default:!1},noProviderFiltering:{type:Boolean,default:!1},sortCompare:{type:Function,default:void 0},mustSort:{type:[Boolean,Array],default:!1},initialSortDirection:{default:"asc"},selectable:{type:Boolean,default:!1},multisort:{type:Boolean,default:!1},stickySelect:{type:Boolean,default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"multi"},selectionVariant:{default:"primary"},busyLoadingText:{default:"Loading..."},perPage:{default:Number.POSITIVE_INFINITY},currentPage:{default:1},filter:{default:void 0},filterFunction:{type:Function,default:void 0},filterable:{default:void 0},noLocalSorting:{type:Boolean,default:!1},noSelectOnClick:{type:Boolean,default:!1},noSortableIcon:{type:Boolean,default:!1},emptyFilteredText:{default:"There are no records matching your request"},emptyText:{default:"There are no records to show"},showEmpty:{type:Boolean,default:!1},align:{default:void 0},caption:{default:void 0},detailsTdClass:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:void 0},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:void 0},modelValue:{default:void 0},primaryKey:{default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{}},{sortBy:{default:void 0},sortByModifiers:{},busy:{type:Boolean,default:!1},busyModifiers:{},selectedItems:{default:()=>[]},selectedItemsModifiers:{}}),emits:e.mergeModels(["filtered","row-selected","row-unselected","sorted","change","head-clicked","row-clicked","row-dblclicked","row-contextmenu","row-hovered","row-unhovered","row-middle-clicked"],["update:sortBy","update:busy","update:selectedItems"]),setup(o,{expose:s,emit:i}){const v=o,m=l.useDefaults(v,"BTable"),y=i,k=e.useSlots(),g=e.computed(()=>Object.keys(k).filter(e=>e.startsWith("cell("))),w=e.computed(()=>Object.keys(k).filter(e=>e.startsWith("foot("))),h=e.useModel(o,"sortBy"),C=e.useModel(o,"busy"),B=e.useModel(o,"selectedItems"),x=n.useId(()=>m.id),_=e.computed({get:()=>new Set(B.value),set:e=>{B.value=[...e]}});e.watch(_,(e,t)=>{Array.from(t).filter(t=>!e.has(t)).forEach(e=>{y("row-unselected",e)}),Array.from(e).filter(e=>!t.has(e)).forEach(e=>{y("row-selected",e)})});const T={add:e=>{const t=new Set(_.value);t.add(e),_.value=t},clear:()=>{_.value.forEach(e=>{T.delete(e)})},delete:e=>{const o=new Set(_.value);if(m.primaryKey){const l=m.primaryKey;B.value.forEach((a,r)=>{const n=t.get(a,l),s=t.get(e,l);n&&s&&n===s&&o.delete(B.value[r])})}else o.delete(e);_.value=o},set:e=>{_.value=new Set(e)},has:e=>{if(!m.primaryKey)return _.value.has(e);const o=m.primaryKey;for(const l of _.value){const a=t.get(l,o),r=t.get(e,o);if(a&&r&&a===r)return!0}return!1}},$=e.ref([]),P=u.useToNumber(()=>m.perPage,{method:"parseInt"}),N=u.useToNumber(()=>m.currentPage,{method:"parseInt"}),D=e.computed(()=>!!m.filter),R=e.computed(()=>void 0!==m.provider),I=e.computed(()=>_.value.size>0),j=e.computed(()=>void 0!==h.value||m.fields.some(e=>"object"==typeof e&&null!==e&&!0===e.sortable)),M=e.computed(()=>!(!m.selectable||m.noSelectOnClick)),O=e.computed(()=>!!j.value);e.provide(d.tableKeyboardNavigationKey,{rowNavigation:M,headerNavigation:O});const L=e.computed(()=>m.fields.map(e=>{if(!p(e)){const t=r.startCase(e);return{key:e,label:t,tdAttr:a.getDataLabelAttr(m,t)}}const t=h.value?.find(t=>e.key===t.key),o=!1===j.value?void 0:void 0===t?"none":"desc"===t.order?"descending":"asc"===t.order?"ascending":"none";return{...e,thAttr:{"aria-sort":o,...e.thAttr}}})),z=e.computed(()=>({"b-table-busy":C.value,"b-table-selectable":m.selectable,"user-select-none":m.selectable&&I.value,"b-table-fixed":m.fixed,"b-table-no-border-collapse":m.noBorderCollapse})),K=e.computed(()=>[m.tbodyTrClass?"function"==typeof m.tbodyTrClass?m.tbodyTrClass(null,"table-busy"):m.tbodyTrClass:null]),H=e=>[{"b-table-sortable-column":j.value&&e.sortable}],q=(e,t)=>[{[`selected table-${m.selectionVariant}`]:m.selectable&&!!e&&T.has(e)},m.tbodyTrClass?"function"==typeof m.tbodyTrClass?m.tbodyTrClass(e,t):m.tbodyTrClass:null],U=e=>"function"==typeof e.sortByFormatted?e.sortByFormatted:e.formatter,W=(e,o)=>{if(!f(e))return String(e);const l=L.value.find(e=>!!p(e)&&e.key===o),a=t.get(e,o);if(p(l)&&l.sortByFormatted){const t=U(l);if(t)return String(c(e,String(l.key),t))}return"object"==typeof a&&null!==a?JSON.stringify(a):a?.toString()??""},Y=e.computed(()=>{const e=new Map;for(const t of L.value)p(t)&&e.set(t.key,t);return e}),J=e.computed(()=>{const e=h.value?.filter(e=>!!e.order),o=(R.value?$.value:m.items).reduce((e,o)=>{const l=(e=>{if("object"==typeof e&&null!==e&&Object.keys(e).some(e=>e.includes("."))){let o={};for(const l in e)l.includes(".")?o=t.set(o,l,e[l]):o[l]=e[l];return o}return e})(o);return D.value&&(!R.value||m.noProviderFiltering)&&!(e=>!f(e)||Object.entries(e).some(([t,o])=>!(null==o||"_"===t[0]||!m.filterable?.includes(t)&&m.filterable?.length)&&(m.filterFunction&&"function"==typeof m.filterFunction?m.filterFunction(e,m.filter):(()=>{const l=L.value.find(e=>!!p(e)&&e.key===t);if(p(l)&&l.filterByFormatted){const t=U(l);if(t)return String(t(o,String(l.key),e))}return"object"==typeof o?JSON.stringify(Object.values(o)):o.toString()})().toLowerCase().includes(m.filter?.toLowerCase()??""))))(l)||e.push(l),e},[]);return e?.length&&(!0===j.value&&!R.value&&!m.noLocalSorting||!0===j.value&&R.value&&m.noProviderSorting)?o.sort((t,o)=>{for(let l=0;l<e.length;l++){const{key:a,order:r}=e[l],n=Y.value.get(a),s=n?.sortCompare||m.sortCompare,i=s?s(t,o,a):W(t,a).localeCompare(W(o,a),void 0,{numeric:!0});if(0!==i)return"asc"===r?i:-i}return 0}):o}),G=e.computed(()=>({emptyFilteredText:m.emptyFilteredText,emptyText:m.emptyText,fields:L.value,items:J.value})),Q=e.computed(()=>Number.isNaN(P.value)||R.value&&!m.noProviderPaging?J.value:J.value.slice((N.value-1)*(P.value||Number.POSITIVE_INFINITY),N.value*(P.value||Number.POSITIVE_INFINITY)));e.watch(Q,e=>{y("change",e)});const X=async()=>{if(!R.value||void 0===m.provider||C.value)return;C.value=!0;const e=m.provider({currentPage:N.value,filter:m.filter,sortBy:h.value,perPage:P.value});try{const t=e instanceof Promise?await e:e;if(void 0===t)return;$.value=t}finally{C.value=!1}},Z=async(e,o,l)=>{if(t.deepEqual(o,l))return;const a=e=>!0===m.noProvider?.includes(e),r=("currentPage"===e||"perPage"===e)&&(a("paging")||!0===m.noProviderPaging),n="filter"===e&&(a("filtering")||!0===m.noProviderFiltering),s=("sortBy"===e||"sortDesc"===e)&&(a("sorting")||!0===m.noProviderSorting);r||n||s||(!0===R.value&&await X(),"currentPage"!==e&&"perPage"!==e&&y("filtered",[...J.value]))};e.watch(()=>m.filter,(e,t)=>{Z("filter",e,t),e===t||R.value||e||y("filtered",[...J.value])}),e.watch(N,(e,t)=>{Z("currentPage",e,t)}),e.watch(P,(e,t)=>{Z("perPage",e,t)}),e.watch(h,(e,t)=>{Z("sortBy",e,t)},{deep:!0}),e.watch(()=>m.provider,e=>{void 0!==e?X():$.value=[]}),e.onMounted(X);const ee={clearSelected:()=>{m.selectable&&T.clear()},selectAllRows:()=>{m.selectable&&"single"!==m.selectMode&&(_.value=new Set(J.value))},selectRow:e=>{if(!m.selectable)return;const t=J.value[e];t&&!T.has(t)&&("single"===m.selectMode?T.set([t]):T.add(t))},unselectRow:e=>{if(!m.selectable)return;const t=J.value[e];t&&T.has(t)&&T.delete(t)},isRowSelected:e=>{if(!m.selectable)return!1;const t=J.value[e];return T.has(t)}},te={onHeadClicked:(e,t,o,l=!1)=>{y("head-clicked",e,t,o,l),(e=>{if(!j.value)return;const t="object"==typeof e&&null!==e?e.key:e,o="object"==typeof e&&null!==e&&e.sortable;if(!0!==j.value||!0!==o)return;const l=()=>{const e=[...h.value??[]].reverse().find(e=>void 0!==e.order&&e.key!==t);return e?.order??"asc"},a=()=>"object"==typeof e&&null!==e&&e.initialSortDirection?"last"===e.initialSortDirection?l():e.initialSortDirection:m.initialSortDirection?"last"===m.initialSortDirection?l():m.initialSortDirection:"asc",r=e=>{if(void 0===e)return a();const o=a(),l=!0===m.mustSort||Array.isArray(m.mustSort)&&m.mustSort.includes(t);return"asc"===e?"desc"===o?l?"desc":void 0:"desc":"desc"!==e||"desc"!==o&&!l?void 0:"asc"},n=h.value?.findIndex(e=>e.key===t)??-1,s=h.value?.[n],i=-1!==n&&s?{...s}:{key:t,order:a()};y("sorted",!0===m.multisort?(()=>{const e=[...h.value??[]],t=i;if(-1===n)e.push(t);else{const o=r(t.order);o?(t.order=o,e.splice(n,1,t)):(t.order=void 0,e.splice(n,1))}return h.value=e,t})():(()=>{const e=-1===n?i.order:r(i.order),t={...i,order:e};return h.value=e?[t]:[],t})())})(t)},onRowClicked:(e,t,o)=>{!1===m.noSelectOnClick&&((e,t,o=!1,l=!1,a=!1)=>{if(m.selectable)if("single"===m.selectMode||"multi"===m.selectMode){if(o||l)return;T.has(e)?T.delete(e):"single"===m.selectMode?T.set([e]):T.add(e)}else if(l||a)T.has(e)?T.delete(e):T.add(e);else if(o){const e=[..._.value].pop(),o=J.value.findIndex(t=>t===e),l=Math.min(o,t),a=Math.max(o,t),r=J.value.slice(l,a+1);T.set(r)}else T.set([e])})(e,t,o.shiftKey,o.ctrlKey,o.metaKey),y("row-clicked",e,t,o)},onRowDblclicked:(...e)=>y("row-dblclicked",...e),onRowContextmenu:(...e)=>y("row-contextmenu",...e),onRowHovered:(...e)=>y("row-hovered",...e),onRowUnhovered:(...e)=>y("row-unhovered",...e),onRowMiddleClicked:(...e)=>y("row-middle-clicked",...e)},oe=e.computed(()=>({...t.pick(m,[...a.btableLiteProps,...a.btableSimpleProps]),tableAttrs:{ariaBusy:C.value},items:Q.value,fields:L.value,tableClass:z.value,tbodyTrClass:q,fieldColumnClass:H,id:x.value,...te}));return s({...ee,items:J,displayItems:Q,getStringValue:W,refresh:X}),(t,o)=>(e.openBlock(),e.createBlock(V,e.normalizeProps(e.guardReactiveProps(oe.value)),e.createSlots({"custom-body":e.withCtx(o=>[C.value&&k["table-busy"]?(e.openBlock(),e.createBlock(S,{key:0,class:e.normalizeClass(["b-table-busy-slot",K.value])},{default:e.withCtx(()=>[e.createVNode(b,{colspan:o.fields.length},{default:e.withCtx(()=>[e.renderSlot(t.$slots,"table-busy")]),_:2},1032,["colspan"])]),_:2},1032,["class"])):!0===e.unref(m).showEmpty&&0===J.value.length?(e.openBlock(),e.createBlock(S,{key:1,class:"b-table-empty-row"},{default:e.withCtx(()=>[e.createVNode(b,{colspan:L.value.length},{default:e.withCtx(()=>[e.createElementVNode("div",A,[e.createElementVNode("div",F,[D.value?e.renderSlot(t.$slots,"empty-filtered",e.normalizeProps(e.mergeProps({key:0},G.value)),()=>[e.createTextVNode(e.toDisplayString(e.unref(m).emptyFilteredText),1)]):e.renderSlot(t.$slots,"empty",e.normalizeProps(e.mergeProps({key:1},G.value)),()=>[e.createTextVNode(e.toDisplayString(e.unref(m).emptyText),1)])])])]),_:3},8,["colspan"])]),_:3})):e.createCommentVNode("",!0)]),_:2},[k["table-colgroup"]?{name:"table-colgroup",fn:e.withCtx(o=>[e.renderSlot(t.$slots,"table-colgroup",e.normalizeProps(e.guardReactiveProps(o)))]),key:"0"}:void 0,k["thead-top"]?{name:"thead-top",fn:e.withCtx(o=>[e.renderSlot(t.$slots,"thead-top",e.mergeProps(o,{clearSelected:ee.clearSelected,selectAllRows:ee.selectAllRows,fields:L.value}))]),key:"1"}:void 0,k["thead-sub"]?{name:"thead-sub",fn:e.withCtx(o=>[e.renderSlot(t.$slots,"thead-sub",e.mergeProps(o,{fields:L.value}))]),key:"2"}:void 0,k["top-row"]?{name:"top-row",fn:e.withCtx(o=>[e.renderSlot(t.$slots,"top-row",e.mergeProps(o,{fields:L.value}))]),key:"3"}:void 0,k["row-details"]?{name:"row-details",fn:e.withCtx(o=>[e.renderSlot(t.$slots,"row-details",e.mergeProps(o,{fields:L.value,selectRow:(e=o.index)=>ee.selectRow(e),unselectRow:(e=o.index)=>ee.unselectRow(e),rowSelected:ee.isRowSelected(o.index)}))]),key:"4"}:void 0,k["bottom-row"]?{name:"bottom-row",fn:e.withCtx(o=>[e.renderSlot(t.$slots,"bottom-row",e.mergeProps(o,{fields:L.value}))]),key:"5"}:void 0,k["custom-foot"]?{name:"custom-foot",fn:e.withCtx(o=>[e.renderSlot(t.$slots,"custom-foot",e.mergeProps(o,{fields:L.value}))]),key:"6"}:void 0,k["table-caption"]?{name:"table-caption",fn:e.withCtx(()=>[e.renderSlot(t.$slots,"table-caption")]),key:"7"}:void 0,e.renderList(g.value,o=>({name:o,fn:e.withCtx(l=>[e.renderSlot(t.$slots,o,e.mergeProps(l,{selectRow:(e=l.index)=>ee.selectRow(e),unselectRow:(e=l.index)=>ee.unselectRow(e),rowSelected:ee.isRowSelected(l.index)}))])})),e.renderList(w.value,o=>({name:o,fn:e.withCtx(l=>[e.renderSlot(t.$slots,o,e.mergeProps(l,{selectAllRows:ee.selectAllRows,clearSelected:ee.clearSelected}))])})),e.renderList(L.value,o=>({name:`head(${String(o.key)})`,fn:e.withCtx(l=>[e.renderSlot(t.$slots,k[`head(${String(o.key)})`]?`head(${String(o.key)})`:"head()",e.mergeProps(l,{selectAllRows:ee.selectAllRows,clearSelected:ee.clearSelected}),()=>[e.createTextVNode(e.toDisplayString(e.unref(a.getTableFieldHeadLabel)(o)),1)]),j.value&&l.field.sortable&&!1===e.unref(m).noSortableIcon?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},["asc"===h.value?.find(e=>e.key===l.field.key)?.order?e.renderSlot(t.$slots,k[`sortAsc(${String(l.field.key)})`]?`sortAsc(${String(l.field.key)})`:"sortAsc()",e.normalizeProps(e.mergeProps({key:0},l)),()=>[e.createVNode(E,{"field-info":l.field,"sort-by":h.value,"initial-sort-direction":e.unref(m).initialSortDirection},null,8,["field-info","sort-by","initial-sort-direction"])]):"desc"===h.value?.find(e=>e.key===l.field.key)?.order?e.renderSlot(t.$slots,k[`sortDesc(${String(l.field.key)})`]?`sortDesc(${String(l.field.key)})`:"sortDesc()",e.normalizeProps(e.mergeProps({key:1},l)),()=>[e.createVNode(E,{"field-info":l.field,"sort-by":h.value,"initial-sort-direction":e.unref(m).initialSortDirection},null,8,["field-info","sort-by","initial-sort-direction"])]):e.renderSlot(t.$slots,k[`sortDefault(${String(l.field.key)})`]?`sortDefault(${String(l.field.key)})`:"sortDefault()",e.normalizeProps(e.mergeProps({key:2},l)),()=>[e.createVNode(E,{"field-info":l.field,"sort-by":h.value,"initial-sort-direction":e.unref(m).initialSortDirection},null,8,["field-info","sort-by","initial-sort-direction"])])],64)):e.createCommentVNode("",!0)])}))]),1040))}});exports._sfc_main=R,exports._sfc_main$1=V,exports._sfc_main$2=v,exports._sfc_main$3=b,exports._sfc_main$4=k,exports._sfc_main$5=h,exports._sfc_main$6=C,exports._sfc_main$7=S;
//# sourceMappingURL=BTable.vue_vue_type_script_setup_true_lang-DX_N8vMi.js.map
