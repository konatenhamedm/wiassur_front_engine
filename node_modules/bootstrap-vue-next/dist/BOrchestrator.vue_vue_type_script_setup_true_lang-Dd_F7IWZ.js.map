{"version":3,"file":"BOrchestrator.vue_vue_type_script_setup_true_lang-Dd_F7IWZ.js","sources":["../src/utils/positionClasses.ts","../src/components/BApp/BOrchestrator.vue"],"sourcesContent":["import type {ContainerPosition} from '../types/Alignment'\n\nexport const positionClasses = {\n  'top-start': 'top-0 start-0',\n  'top-center': 'top-0 start-50 translate-middle-x',\n  'top-end': 'top-0 end-0',\n  'middle-start': 'top-50 start-0 translate-middle-y',\n  'middle-center': 'top-50 start-50 translate-middle',\n  'middle-end': 'top-50 end-0 translate-middle-y',\n  'bottom-start': 'bottom-0 start-0',\n  'bottom-center': 'bottom-0 start-50 translate-middle-x',\n  'bottom-end': 'bottom-0 end-0',\n} as const satisfies Record<ContainerPosition, string>\n","<template>\n  <ConditionalTeleport :to=\"teleportTo\" :disabled=\"!teleportTo\">\n    <div class=\"orchestrator-container\" v-bind=\"$attrs\">\n      <div\n        v-for=\"(value, key) in ComputedPositionClasses\"\n        :key=\"key\"\n        :class=\"value.class\"\n        :style=\"value.style\"\n      >\n        <TransitionGroup\n          :name=\"\n            items?.filter((el) => el.position === key)?.some((el) => el.type === 'toast')\n              ? 'b-list'\n              : undefined\n          \"\n        >\n          <!-- eslint-disable vue/no-unused-vars -->\n          <span\n            v-for=\"{\n              _self,\n              type,\n              position,\n              slots,\n              promise,\n              options,\n              _component,\n              ...val\n            } in items?.filter((el) => el.position === key) || []\"\n            :key=\"_self\"\n          >\n            <component\n              :is=\"_component\"\n              v-bind=\"val\"\n              :ref=\"(ref: ComponentPublicInstance) => (promise.value.ref = ref)\"\n              initial-animation\n              :teleport-disabled=\"true\"\n              @hide=\"\n                (e: BvTriggerableEvent) => {\n                  setEventOk(e)\n                  val.onHide?.(e)\n                  if (e.defaultPrevented) {\n                    return\n                  }\n                  promise.stop?.()\n                  if (options?.resolveOnHide) {\n                    promise.resolve(e)\n                  }\n                }\n              \"\n              @hidden=\"\n                (e: BvTriggerableEvent) => {\n                  setEventOk(e)\n                  val.onHidden?.(e)\n                  if (e.defaultPrevented) {\n                    return\n                  }\n                  if (!options?.resolveOnHide) {\n                    promise.resolve(e)\n                  }\n                  if (!options?.keep) {\n                    promise.value.destroy?.()\n                  }\n                }\n              \"\n            >\n              <template v-for=\"(comp, slot) in slots\" #[slot]=\"scope\" :key=\"slot\">\n                <component :is=\"comp\" v-bind=\"scope\" />\n              </template>\n            </component>\n          </span>\n        </TransitionGroup>\n      </div>\n    </div>\n  </ConditionalTeleport>\n</template>\n\n<script setup lang=\"ts\">\nimport {type ComponentPublicInstance, computed, inject, watch} from 'vue'\nimport {orchestratorRegistryKey} from '../../utils/keys'\nimport {positionClasses} from '../../utils/positionClasses'\nimport type {BvTriggerableEvent} from '../../utils'\nimport type {BOrchestratorProps} from '../../types/ComponentProps'\nimport ConditionalTeleport from '../ConditionalTeleport.vue'\n\nfunction setEventOk(event: BvTriggerableEvent): void {\n  event.ok = event.trigger === 'ok' ? true : event.trigger === 'cancel' ? false : null\n}\n\nconst props = withDefaults(defineProps<BOrchestratorProps>(), {\n  noPopovers: false,\n  noToasts: false,\n  noModals: false,\n  appendToast: false,\n  filter: () => true,\n})\n\nconst orchestratorRegistry = inject(orchestratorRegistryKey)\n\nif (orchestratorRegistry) {\n  if (!orchestratorRegistry._isOrchestratorInstalled.value) {\n    orchestratorRegistry._isOrchestratorInstalled.value = true\n  }\n} else {\n  if (process.env.NODE_ENV === 'development') {\n    // eslint-disable-next-line no-console\n    console.warn(\n      '[BOrchestrator] The orchestrator registry not found. Please use BApp, useRegistry or provide the plugin.'\n    )\n  }\n}\n\nwatch(\n  () => props.appendToast,\n  (value) => {\n    if (orchestratorRegistry && value !== undefined) {\n      orchestratorRegistry._isToastAppend.value = value\n    }\n  },\n  {immediate: true}\n)\n\nconst ComputedPositionClasses = computed(() => {\n  const positionsActive = items.value?.reduce(\n    (acc, item) => {\n      if (item.position) {\n        acc[item.position] = true\n      }\n      return acc\n    },\n    {} as Record<string, boolean>\n  )\n  const classes: Record<string, {class: string; style: string}> = {}\n  for (const position in positionClasses) {\n    if (positionsActive?.[position]) {\n      classes[position] = {\n        class: `${\n          positionClasses[position as keyof typeof positionClasses]\n        } toast-container position-fixed p-3`,\n        style:\n          'width: calc(var(--bs-toast-max-width, 350px) + var(--bs-toast-padding-x, 1rem) * 2)',\n      }\n    }\n  }\n  if (positionsActive?.['modal']) {\n    classes['modal'] = {\n      class: '',\n      style: '',\n    }\n  }\n  if (positionsActive?.['popover']) {\n    classes['popover'] = {\n      class: '',\n      style: '',\n    }\n  }\n  return classes\n})\n\nconst items = computed(() => {\n  const store = orchestratorRegistry?.store.value ?? []\n  return store\n    .filter((el) => !props.noPopovers || el.type !== 'popover')\n    .filter((el) => !props.noToasts || el.type !== 'toast')\n    .filter((el) => !props.noModals || el.type !== 'modal')\n    .filter(props.filter)\n})\n</script>\n"],"names":["positionClasses","setEventOk","event","ok","trigger","props","__props","orchestratorRegistry","inject","orchestratorRegistryKey","_isOrchestratorInstalled","value","process","env","NODE_ENV","console","warn","watch","appendToast","_isToastAppend","immediate","ComputedPositionClasses","computed","positionsActive","items","reduce","acc","item","position","classes","class","style","store","filter","el","noPopovers","type","noToasts","noModals","_createBlock","ConditionalTeleport","to","teleportTo","disabled","_createElementVNode","_mergeProps","$attrs","_openBlock","_createElementBlock","_Fragment","_renderList","key","_normalizeClass","_normalizeStyle","_createVNode","_TransitionGroup","name","some","_self","slots","promise","options","_component","val","_resolveDynamicComponent","ref","onHide","e","defaultPrevented","stop","resolveOnHide","resolve","onHidden","keep","destroy","comp","slot","fn","_withCtx","scope"],"mappings":"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"}