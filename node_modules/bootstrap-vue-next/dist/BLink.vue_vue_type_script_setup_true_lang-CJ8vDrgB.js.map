{"version":3,"file":"BLink.vue_vue_type_script_setup_true_lang-CJ8vDrgB.js","sources":["../src/composables/useLinkClasses.ts","../src/components/BLink/BLink.vue","../src/composables/useBLinkHelper.ts","../src/utils/isLink.ts"],"sourcesContent":["import {computed, type MaybeRefOrGetter, toValue} from 'vue'\nimport type {\n  LinkIconProps,\n  LinkOpacityProps,\n  LinkUnderlineProps,\n  LinkVariantProps,\n} from '../types/ComponentProps'\n\nexport const useLinkClasses = (\n  linkProps: MaybeRefOrGetter<\n    LinkUnderlineProps & LinkOpacityProps & LinkIconProps & LinkVariantProps\n  >\n) =>\n  computed(() => {\n    const props = toValue(linkProps)\n    return {\n      [`link-${props.variant}`]: props.variant !== null,\n      [`link-opacity-${props.opacity}`]: props.opacity !== undefined,\n      [`link-opacity-${props.opacityHover}-hover`]: props.opacityHover !== undefined,\n      [`link-underline-${props.underlineVariant}`]: props.underlineVariant !== null,\n      [`link-offset-${props.underlineOffset}`]: props.underlineOffset !== undefined,\n      [`link-offset-${props.underlineOffsetHover}-hover`]: props.underlineOffsetHover !== undefined,\n      ['link-underline']:\n        props.underlineVariant === null &&\n        (props.underlineOpacity !== undefined || props.underlineOpacityHover !== undefined),\n      [`link-underline-opacity-${props.underlineOpacity}`]: props.underlineOpacity !== undefined,\n      [`link-underline-opacity-${props.underlineOpacityHover}-hover`]:\n        props.underlineOpacityHover !== undefined,\n      'icon-link': props.icon === true,\n    }\n  })\n","<template>\n  <component\n    :is=\"tag\"\n    :class=\"computedClasses\"\n    :target=\"props.target\"\n    :href=\"computedHref\"\n    :rel=\"computedRel\"\n    :tabindex=\"computedTabIndex\"\n    :aria-disabled=\"props.disabled ? true : null\"\n    v-bind=\"computedSpecificProps\"\n    @click=\"\n      (e: MouseEvent) => {\n        clicked(e)\n        link?.navigate(e)\n      }\n    \"\n  >\n    <slot />\n  </component>\n</template>\n\n<script setup lang=\"ts\">\nimport {useDefaults} from '../../composables/useDefaults'\nimport {useLinkClasses} from '../../composables/useLinkClasses'\nimport type {BLinkProps} from '../../types/ComponentProps'\nimport {collapseInjectionKey, navbarInjectionKey} from '../../utils/keys'\nimport {computed, inject, useAttrs} from 'vue'\nimport {useBLinkTagResolver} from '../../composables/useBLinkHelper'\nimport type {BLinkEmits, BLinkSlots} from '../../types'\n\nconst defaultActiveClass = 'active'\n\nconst _props = withDefaults(defineProps<BLinkProps>(), {\n  active: undefined,\n  activeClass: 'router-link-active',\n  disabled: false,\n  exactActiveClass: 'router-link-exact-active',\n  href: undefined,\n  icon: false,\n  opacity: undefined,\n  opacityHover: undefined,\n  noPrefetch: undefined,\n  prefetchOn: undefined,\n  noRel: false,\n  prefetchedClass: undefined,\n  prefetch: undefined,\n  rel: undefined,\n  replace: false,\n  routerComponentName: 'router-link',\n  routerTag: 'a',\n  stretched: false,\n  target: undefined,\n  to: undefined,\n  underlineOffset: undefined,\n  underlineOffsetHover: undefined,\n  underlineOpacity: undefined,\n  underlineOpacityHover: undefined,\n  underlineVariant: null,\n  variant: null,\n})\nconst props = useDefaults(_props, 'BLink')\nconst emit = defineEmits<BLinkEmits>()\ndefineSlots<BLinkSlots>()\nconst attrs = useAttrs()\n\nconst {computedHref, tag, link, isNuxtLink, isRouterLink, linkProps, isNonStandardTag} =\n  useBLinkTagResolver({\n    routerComponentName: () => props.routerComponentName,\n    disabled: () => props.disabled,\n    to: () => props.to,\n    replace: () => props.replace,\n    href: () => props.href,\n  })\n\nconst collapseData = inject(collapseInjectionKey, null)\nconst navbarData = inject(navbarInjectionKey, null)\n\n/**\n * Not to be confused with computedLinkClasses\n */\nconst linkValueClasses = useLinkClasses(props)\nconst computedClasses = computed(() => [\n  linkValueClasses.value,\n  attrs.class,\n  computedLinkClasses.value,\n  {\n    [defaultActiveClass]: props.active,\n    [props.activeClass]: link.value?.isActive.value || false,\n    [props.exactActiveClass]: link.value?.isExactActive.value || false,\n    'stretched-link': props.stretched === true,\n  },\n])\nconst computedLinkClasses = computed(() => ({\n  [defaultActiveClass]: props.active,\n  disabled: props.disabled,\n}))\n\nconst clicked = (e: Readonly<MouseEvent>): void => {\n  if (props.disabled) {\n    e.preventDefault()\n    e.stopImmediatePropagation()\n    return\n  }\n\n  if (\n    (collapseData?.isNav?.value === true && navbarData === null) ||\n    (navbarData !== null && navbarData.noAutoClose?.value !== true)\n  ) {\n    collapseData?.hide?.()\n  }\n\n  emit('click', e)\n}\n\nconst computedRel = computed(() =>\n  props.target === '_blank' ? (!props.rel && props.noRel ? 'noopener' : props.rel) : undefined\n)\nconst computedTabIndex = computed(() =>\n  props.disabled ? '-1' : typeof attrs.tabindex === 'undefined' ? null : attrs.tabindex\n)\n\nconst nuxtSpecificProps = computed(() => ({\n  prefetch: props.prefetch,\n  noPrefetch: props.noPrefetch,\n  prefetchOn: props.prefetchOn,\n  prefetchedClass: props.prefetchedClass,\n  ...linkProps.value,\n}))\nconst computedSpecificProps = computed(() => ({\n  ...(isRouterLink.value ? linkProps.value : undefined),\n  // In addition to being Nuxt specific, we add these values if it's some non-standard tag. We don't know what it is,\n  // So we just add it anyways. It will be made as an attr if it's unused so it's fine\n  ...(isNuxtLink.value || isNonStandardTag.value ? nuxtSpecificProps.value : undefined),\n}))\n</script>\n","import {\n  computed,\n  getCurrentInstance,\n  type MaybeRefOrGetter,\n  readonly,\n  resolveDynamicComponent,\n  toRef,\n  toValue,\n} from 'vue'\nimport {isLink} from '../utils/isLink'\nimport {pick} from '../utils/object'\nimport type {RouteLocationRaw, RouterLink} from 'vue-router'\nimport {toPascalCase} from '../utils/stringUtils'\n\nexport const useBLinkHelper = <\n  T extends Record<string, unknown>,\n  const B extends ReadonlyArray<PropertyKey>,\n>(\n  props: MaybeRefOrGetter<T>,\n  pickProps?: MaybeRefOrGetter<B | (keyof T)[]>\n) => {\n  const pickPropsResolved = readonly(toRef(pickProps))\n  const resolvedProps = readonly(toRef(props))\n\n  const computedLink = computed(() => isLink(resolvedProps.value))\n  const computedLinkProps = computed(() =>\n    computedLink.value\n      ? pick(\n          resolvedProps.value,\n          pickPropsResolved.value ?? [\n            'active',\n            'activeClass',\n            'append',\n            'exactActiveClass',\n            'href',\n            'rel',\n            'replace',\n            'routerComponentName',\n            'target',\n            'to',\n            'variant',\n            'opacity',\n            'opacityHover',\n            'underlineVariant',\n            'underlineOffset',\n            'underlineOffsetHover',\n            'underlineOpacity',\n            'underlineOpacityHover',\n          ]\n        )\n      : {}\n  )\n\n  return {computedLink, computedLinkProps}\n}\n\nexport const useBLinkTagResolver = ({\n  to,\n  disabled,\n  href,\n  replace,\n  routerComponentName,\n}: {\n  routerComponentName: MaybeRefOrGetter<string>\n  disabled: MaybeRefOrGetter<boolean>\n  to: MaybeRefOrGetter<RouteLocationRaw | undefined>\n  href: MaybeRefOrGetter<string | undefined>\n  replace: MaybeRefOrGetter<boolean>\n}) => {\n  // Getting instance\n  const instance = getCurrentInstance()\n  const router = instance?.appContext?.app?.config?.globalProperties?.$router\n  const route = instance?.appContext?.app?.config?.globalProperties?.$route\n  const RouterLinkComponent = resolveDynamicComponent('RouterLink') as typeof RouterLink | string\n  const useLink =\n    !!RouterLinkComponent &&\n    typeof RouterLinkComponent !== 'string' &&\n    'useLink' in RouterLinkComponent\n      ? RouterLinkComponent.useLink\n      : null\n\n  // Resolving props\n  const resolvedTo = computed(() => toValue(to) || '')\n  const resolvedReplace = readonly(toRef(replace))\n\n  const routerName = computed(() => toPascalCase(toValue(routerComponentName)))\n\n  const tag = computed(() => {\n    const hasRouter = instance?.appContext?.app?.component(routerName.value) !== undefined\n    if (!hasRouter || toValue(disabled) || !resolvedTo.value) {\n      return 'a'\n    }\n    return routerName.value\n  })\n\n  const isRouterLink = computed(() => tag.value === 'RouterLink')\n  const isNuxtLink = computed(\n    // @ts-expect-error we're doing an explicit check for Nuxt, so we can safely ignore this\n    () => isRouterLink.value && typeof instance?.appContext?.app?.$nuxt !== 'undefined'\n  )\n  const isNonStandardTag = computed(\n    () => tag.value !== 'a' && !isRouterLink.value && !isNuxtLink.value\n  )\n  const isOfRouterType = computed(() => isRouterLink.value || isNuxtLink.value)\n  const linkProps = computed(() => ({\n    to: resolvedTo.value,\n    replace: resolvedReplace.value,\n  }))\n\n  const _link = useLink?.({\n    to: resolvedTo,\n    replace: resolvedReplace,\n  })\n  const link = computed(() => (isOfRouterType.value ? _link : null))\n\n  const computedHref = computed(() => {\n    if (link.value?.href.value) return link.value.href.value\n\n    const toFallback = '#'\n    const resolvedHref = toValue(href)\n    if (resolvedHref) return resolvedHref\n\n    if (typeof resolvedTo.value === 'string') return resolvedTo.value || toFallback\n\n    // Stabilize the `to` prop for the callback functions\n    const stableTo = resolvedTo.value\n\n    if (stableTo !== undefined && 'path' in stableTo) {\n      const path = stableTo.path || ''\n      const query = stableTo.query\n        ? `?${Object.keys(stableTo.query)\n            .map((e) => `${e}=${stableTo.query?.[e]}`)\n            .join('=')}`\n        : ''\n      const hash =\n        !stableTo.hash || stableTo.hash.charAt(0) === '#'\n          ? stableTo.hash || ''\n          : `#${stableTo.hash}`\n      return `${path}${query}${hash}` || toFallback\n    }\n    // There is no resolver for `RouteLocationNamedRaw`. Which, I'm not sure there can be one in this context.\n\n    return toFallback\n  })\n\n  return {\n    isNonStandardTag,\n    tag,\n    isRouterLink,\n    isNuxtLink,\n    computedHref,\n    routerName,\n    router,\n    route,\n    link,\n    linkProps,\n  }\n}\n","import type {RouteLocationRaw} from 'vue-router'\n\nexport const isLink = (props: Readonly<{href?: string; to?: RouteLocationRaw}>): boolean =>\n  !!(props.href || props.to)\n"],"names":["useLinkClasses","linkProps","computed","props","toValue","variant","opacity","opacityHover","underlineVariant","underlineOffset","underlineOffsetHover","underlineOpacity","underlineOpacityHover","icon","defaultActiveClass","_props","__props","useDefaults","emit","__emit","attrs","useAttrs","computedHref","tag","link","isNuxtLink","isRouterLink","isNonStandardTag","to","disabled","href","replace","routerComponentName","instance","getCurrentInstance","router","appContext","app","config","globalProperties","$router","route","$route","RouterLinkComponent","resolveDynamicComponent","useLink","resolvedTo","resolvedReplace","readonly","toRef","routerName","toPascalCase","component","value","$nuxt","isOfRouterType","_link","resolvedHref","stableTo","path","query","Object","keys","map","e","join","hash","charAt","useBLinkTagResolver","collapseData","inject","collapseInjectionKey","navbarData","navbarInjectionKey","linkValueClasses","computedClasses","class","computedLinkClasses","active","activeClass","isActive","exactActiveClass","isExactActive","stretched","computedRel","target","rel","noRel","computedTabIndex","tabindex","nuxtSpecificProps","prefetch","noPrefetch","prefetchOn","prefetchedClass","computedSpecificProps","_createBlock","_resolveDynamicComponent","_unref","_mergeProps","onClick","_cache","preventDefault","stopImmediatePropagation","isNav","noAutoClose","hide","clicked","navigate","_renderSlot","_ctx","$slots","pickProps","pickPropsResolved","resolvedProps","computedLink","isLink","computedLinkProps","pick"],"mappings":"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"}