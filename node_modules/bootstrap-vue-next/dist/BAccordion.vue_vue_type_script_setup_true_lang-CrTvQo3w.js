"use strict";const e=require("vue"),a=require("./keys-D59bcWpQ.js"),l=require("./useId-owZCNodL.js"),t=require("./useDefaults-DspAih6L.js"),o=require("./flattenFragments-Dj-WOIPD.js"),u=require("./BCollapse.vue_vue_type_script_setup_true_lang-Bqv_JSj7.js"),r=require("./dom-Cbel14Rh.js"),n=["aria-expanded","aria-controls","onClick"],i=e.defineComponent({inheritAttrs:!1,__name:"BAccordionItem",props:e.mergeModels({bodyAttrs:{default:void 0},bodyClass:{default:void 0},buttonAttrs:{default:void 0},buttonClass:{default:void 0},collapseClass:{default:void 0},headerAttrs:{default:void 0},headerClass:{default:void 0},headerTag:{default:"h2"},horizontal:{type:Boolean,default:void 0},id:{default:void 0},isNav:{type:Boolean,default:void 0},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},tag:{default:void 0},title:{default:void 0},show:{type:Boolean,default:void 0},visible:{type:Boolean,default:!1},wrapperAttrs:{default:void 0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:e.mergeModels(["hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(o,{emit:r}){const i=o,d=t.useDefaults(i,"BAccordionItem"),s=r,v=e.useAttrs(),c=e.computed(()=>{const{class:e,...a}=v;return{wrapperClass:e,collapseAttrs:a}}),f=e.inject(a.accordionInjectionKey,null),p=l.useId(()=>d.id,"accordion_item"),m=e.useModel(o,"modelValue");m.value?f?.setOpenItem(p.value):m.value=(Array.isArray(f?.openItem.value)?f?.openItem.value.includes(p.value):f?.openItem.value===p.value)&&!f?.initialAnimation.value;const y=e.useTemplateRef("_el");f?.registerAccordionItem(p.value,y),e.onUnmounted(()=>{f?.unregisterAccordionItem(p.value)}),e.onMounted(()=>{m.value||f?.openItem.value!==p.value||e.nextTick(()=>{m.value=!0})});const A=e.computed(()=>Array.isArray(f?.openItem.value)?f?.openItem.value.includes(p.value):f?.openItem.value===p.value);return e.watch(()=>f?.openItem.value,()=>m.value=A.value),e.watch(m,()=>{m.value&&!A.value?f?.setOpenItem(p.value):!m.value&&A.value&&f?.setCloseItem(p.value)}),(a,l)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({ref:"_el",class:"accordion-item"},e.unref(d).wrapperAttrs,{class:c.value.wrapperClass}),[e.createVNode(u._sfc_main,e.mergeProps({id:e.unref(p),modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),class:["accordion-collapse",e.unref(d).collapseClass],"aria-labelledby":`${e.unref(p)}-heading`},c.value.collapseAttrs,{tag:e.unref(d).tag,show:e.unref(d).show,horizontal:e.unref(d).horizontal,visible:e.unref(d).visible,"is-nav":e.unref(d).isNav,lazy:e.unref(d).lazy||e.unref(f)?.lazy.value,"unmount-lazy":e.unref(d).unmountLazy||e.unref(f)?.unmountLazy.value,onShow:l[1]||(l[1]=e=>s("show",e)),onShown:l[2]||(l[2]=e=>s("shown",e)),onHide:l[3]||(l[3]=e=>s("hide",e)),onHidden:l[4]||(l[4]=e=>s("hidden",e)),onHidePrevented:l[5]||(l[5]=e=>s("hide-prevented",e)),onShowPrevented:l[6]||(l[6]=e=>s("show-prevented",e)),onTogglePrevented:l[7]||(l[7]=e=>s("toggle-prevented",e)),onToggle:l[8]||(l[8]=e=>s("toggle",e))}),{header:e.withCtx(({visible:l,toggle:t})=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(d).headerTag),e.mergeProps({id:`${e.unref(p)}-heading`,class:["accordion-header",e.unref(d).headerClass]},e.unref(d).headerAttrs),{default:e.withCtx(()=>[e.createElementVNode("button",e.mergeProps({class:"accordion-button"},e.unref(d).buttonAttrs,{class:[{collapsed:!l},e.unref(d).buttonClass],type:"button","aria-expanded":l?"true":"false","aria-controls":e.unref(p),onClick:t}),[e.renderSlot(a.$slots,"title",{},()=>[e.createTextVNode(e.toDisplayString(e.unref(d).title),1)])],16,n)]),_:2},1040,["id","class"]))]),default:e.withCtx(()=>[e.createElementVNode("div",e.mergeProps({class:"accordion-body"},e.unref(d).bodyAttrs,{class:e.unref(d).bodyClass}),[e.renderSlot(a.$slots,"default")],16)]),_:3},16,["id","modelValue","class","aria-labelledby","tag","show","horizontal","visible","is-nav","lazy","unmount-lazy"])],16))}}),d=["id"],s=e.defineComponent({__name:"BAccordion",props:e.mergeModels({flush:{type:Boolean,default:!1},free:{type:Boolean,default:!1},id:{default:void 0},initialAnimation:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1}},{modelValue:{default:void 0},modelModifiers:{},index:{default:void 0},indexModifiers:{}}),emits:["update:modelValue","update:index"],setup(u){const n=u,s=t.useDefaults(n,"BAccordion"),v=e.useSlots(),c=e.useModel(u,"modelValue"),f=e.useModel(u,"index"),p=e.ref([]),m=()=>{const e=o.flattenFragments(v.default?.({})??[]);p.value=(Array.isArray(e)?e:[e]).filter(e=>e.type===i)};m(),e.watch(()=>v.default?.({}),()=>{m(),e.nextTick(()=>{A()})});const y=e.shallowRef([]),A=()=>{if(y.value=y.value.sort((a,l)=>r.sortSlotElementsByPosition(e.unref(a.el),e.unref(l.el))),c.value)if(Array.isArray(c.value)){const e=c.value.map(e=>y.value.findIndex(a=>a.id===e)).filter(e=>-1!==e);e.length!==c.value.length&&"development"===process.env.NODE_ENV&&console.warn("[BAccordion] Unknown item id in v-model:",c.value),f.value=e}else{const e=y.value.findIndex(e=>e.id===c.value);-1!==e&&(f.value=e)}else void 0!==f.value&&(c.value=Array.isArray(f.value)?f.value.map(e=>y.value[e]?.id):y.value[f.value]?.id)},h=l.useId(()=>s.id,"accordion"),g=e.computed(()=>({"accordion-flush":s.flush})),I=(e,a)=>Array.isArray(e)&&Array.isArray(a)?e.length===a.length&&e.every((e,l)=>e===a[l]):e===a;return e.watch(()=>f.value,(a,l)=>{if(!I(a,l))if(void 0!==f.value)if(s.free)if(Array.isArray(f.value)){const e=f.value.map(e=>y.value[e]?.id);I(e,c.value)||(c.value=e)}else{const a=y.value[f.value]?.id;if(void 0===a)return void e.nextTick(()=>{f.value=void 0});I(a,c.value)||(c.value=a)}else{const a=Array.isArray(f.value)?f.value?.[0]:f.value;y.value[a]?.id?c.value!==y.value[a]?.id&&(c.value=y.value[a]?.id):e.nextTick(()=>{f.value=void 0})}else c.value=void 0}),e.watch(()=>c.value,(a,l)=>{if(!I(a,l))if(void 0!==c.value)if(s.free){if(s.free)if(Array.isArray(c.value)){const a=c.value.map(e=>y.value.findIndex(a=>a.id===e)).filter(e=>-1!==e);a.length>0?I(a,f.value)||(f.value=a):e.nextTick(()=>{c.value=void 0})}else{const e=y.value.findIndex(e=>e.id===c.value);I(e,f.value)||(f.value=e)}}else{const a=Array.isArray(c.value)?y.value.findIndex(e=>e.id===c.value?.[0]):y.value.findIndex(e=>e.id===c.value);-1!==a?f.value!==a&&(f.value=a):e.nextTick(()=>{c.value=void 0})}else f.value=void 0},{deep:!0}),e.watch(()=>s.free,e=>{c.value&&(!e&&Array.isArray(c.value)?c.value=c.value[0]:e&&!Array.isArray(c.value)&&(c.value=[c.value]))}),e.provide(a.accordionInjectionKey,{openItem:e.toRef(()=>c.value),free:e.toRef(()=>s.free),initialAnimation:e.toRef(()=>s.initialAnimation),lazy:e.toRef(()=>s.lazy),unmountLazy:e.toRef(()=>s.unmountLazy),setOpenItem:e=>{!s.free||Array.isArray(c.value)?(s.free||!Array.isArray(c.value))&&Array.isArray(c.value)?c.value.includes(e)||(c.value=[...c.value,e]):c.value=e:void 0!==c.value?c.value=[c.value,e]:c.value=[e]},setCloseItem:e=>{if(s.free||!Array.isArray(c.value))if(Array.isArray(c.value)){const a=c.value.filter(a=>a!==e);c.value=a.length?a:void 0}else c.value===e&&(c.value=void 0);else c.value=void 0},registerAccordionItem:(e,a)=>{y.value=[...y.value,{id:e,el:a}],y.value.length===p.value.length&&A()},unregisterAccordionItem:e=>{y.value=y.value.filter(a=>a.id!==e)}}),(a,l)=>(e.openBlock(),e.createElementBlock("div",{id:e.unref(h),class:e.normalizeClass(["accordion",g.value])},[e.renderSlot(a.$slots,"default")],10,d))}});exports._sfc_main=s,exports._sfc_main$1=i;
//# sourceMappingURL=BAccordion.vue_vue_type_script_setup_true_lang-CrTvQo3w.js.map
